{"componentChunkName":"component---src-templates-blog-post-js","path":"/infra/","result":{"data":{"site":{"siteMetadata":{"title":"SH"}},"markdownRemark":{"id":"b8dab0e3-31e5-5d5d-9708-55e60320da0c","excerpt":"인프라 레벨 최소한의 인프라 정적 페이지 CDN S3 저장소 람다 API Gateway 규모가 커짐에 따라 안정적인 운영을 위한 추가 인프라 데이터베이스 캐시 오토스케일러 강력하게 탄탄한 인프라 메시지 큐 About Cloud…","html":"<h2 id=\"인프라-레벨\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%ED%94%84%EB%9D%BC-%EB%A0%88%EB%B2%A8\" aria-label=\"인프라 레벨 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인프라 레벨</h2>\n<h4 id=\"최소한의-인프라\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%86%8C%ED%95%9C%EC%9D%98-%EC%9D%B8%ED%94%84%EB%9D%BC\" aria-label=\"최소한의 인프라 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최소한의 인프라</h4>\n<ul>\n<li>정적 페이지</li>\n<li>CDN</li>\n<li>S3 저장소</li>\n<li>람다</li>\n<li>API Gateway</li>\n</ul>\n<h4 id=\"규모가-커짐에-따라-안정적인-운영을-위한-추가-인프라\" style=\"position:relative;\"><a href=\"#%EA%B7%9C%EB%AA%A8%EA%B0%80-%EC%BB%A4%EC%A7%90%EC%97%90-%EB%94%B0%EB%9D%BC-%EC%95%88%EC%A0%95%EC%A0%81%EC%9D%B8-%EC%9A%B4%EC%98%81%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%B6%94%EA%B0%80-%EC%9D%B8%ED%94%84%EB%9D%BC\" aria-label=\"규모가 커짐에 따라 안정적인 운영을 위한 추가 인프라 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>규모가 커짐에 따라 안정적인 운영을 위한 추가 인프라</h4>\n<ul>\n<li>데이터베이스</li>\n<li>캐시</li>\n<li>오토스케일러</li>\n</ul>\n<h4 id=\"강력하게-탄탄한-인프라\" style=\"position:relative;\"><a href=\"#%EA%B0%95%EB%A0%A5%ED%95%98%EA%B2%8C-%ED%83%84%ED%83%84%ED%95%9C-%EC%9D%B8%ED%94%84%EB%9D%BC\" aria-label=\"강력하게 탄탄한 인프라 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>강력하게 탄탄한 인프라</h4>\n<ul>\n<li>메시지 큐</li>\n</ul>\n<h2 id=\"about-cloud\" style=\"position:relative;\"><a href=\"#about-cloud\" aria-label=\"about cloud permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>About Cloud</h2>\n<h4 id=\"모든것을-위한-클라우드는-없다\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0%EA%B2%83%EC%9D%84-%EC%9C%84%ED%95%9C-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%EB%8A%94-%EC%97%86%EB%8B%A4\" aria-label=\"모든것을 위한 클라우드는 없다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든것을 위한 클라우드는 없다</h4>\n<ul>\n<li>그럼 트리 구조로 선택 가능한가</li>\n<li>회귀 가능한 요소는 어떤게 있을까</li>\n<li>집약 세분화 집약 세분화</li>\n<li>비용</li>\n<li>사용자</li>\n<li>시간</li>\n<li>공간</li>\n</ul>\n<h4 id=\"정적페이지로-최대한-만들어서-cdn-이용하기\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EC%A0%81%ED%8E%98%EC%9D%B4%EC%A7%80%EB%A1%9C-%EC%B5%9C%EB%8C%80%ED%95%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%84%9C-cdn-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"정적페이지로 최대한 만들어서 cdn 이용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정적페이지로 최대한 만들어서 cdn 이용하기</h4>\n<p>스테이트리스 한건 정적으로, 스테이트풀한건 서버를 사용해야 한다</p>\n<h4 id=\"클라우드는-편리하지만-내부를-통제할-수-없다\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%EB%8A%94-%ED%8E%B8%EB%A6%AC%ED%95%98%EC%A7%80%EB%A7%8C-%EB%82%B4%EB%B6%80%EB%A5%BC-%ED%86%B5%EC%A0%9C%ED%95%A0-%EC%88%98-%EC%97%86%EB%8B%A4\" aria-label=\"클라우드는 편리하지만 내부를 통제할 수 없다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클라우드는 편리하지만 내부를 통제할 수 없다</h4>\n<p>클라우드에서는 시스템 자원 관리는 클라우드에 맡김으로써 하드웨어의 효율화에 대한 고민은 생략된다. (캐시와 CPU, DISK 간의 구성에 대해 신경을 못쓴다). 이 부분의 최적화는 생략하는 대신 내 서비스가 잘 실행되느냐에 집중할 수 있다.</p>\n<ul>\n<li>AWS, GCP, AZURE</li>\n<li>server -> lambda -> dynamodb -> server</li>\n<li>web, db, lambda, mq</li>\n<li>cognito</li>\n<li>cloud program micro service - use app engine</li>\n<li>lambda &#x3C;-> sns server &#x3C;-> web server</li>\n</ul>\n<h4 id=\"ec2-인스턴스-리소스-요금-항목\" style=\"position:relative;\"><a href=\"#ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%9A%94%EA%B8%88-%ED%95%AD%EB%AA%A9\" aria-label=\"ec2 인스턴스 리소스 요금 항목 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ec2 인스턴스 리소스 요금 항목</h4>\n<p>인스턴스 유지하는데 비용은 표시된만큼 나오는데 사용하다보면 그 외에 추가 요금이\n생긴다\npublic static ip\nbandwidth (per GB)</p>\n<h4 id=\"aws-서버들-간-벤치마크\" style=\"position:relative;\"><a href=\"#aws-%EC%84%9C%EB%B2%84%EB%93%A4-%EA%B0%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"aws 서버들 간 벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>aws 서버들 간 벤치마크</h4>\n<ul>\n<li><a href=\"https://dev.to/yaorenjie/benchmarks-of-aws-ec2-5-4-3-series-1kpl\">https://dev.to/yaorenjie/benchmarks-of-aws-ec2-5-4-3-series-1kpl</a></li>\n<li>C (cpu) / M (general) / R (memory) 시리즈가 있고, 3, 4, 5세대로 발전하고 있다</li>\n<li>싱글코어에서는 시리즈별 차이는 거의 없다</li>\n<li>AMD 서버는 CPU는 20% 빠르지만 메모리는 25% 느렸다</li>\n</ul>\n<h4 id=\"kubernetes-셋팅을-위한-cloud-hosting-자원-종류\" style=\"position:relative;\"><a href=\"#kubernetes-%EC%85%8B%ED%8C%85%EC%9D%84-%EC%9C%84%ED%95%9C-cloud-hosting-%EC%9E%90%EC%9B%90-%EC%A2%85%EB%A5%98\" aria-label=\"kubernetes 셋팅을 위한 cloud hosting 자원 종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>kubernetes 셋팅을 위한 cloud hosting 자원 종류</h4>\n<ul>\n<li>control plane (aks, gke ...)</li>\n<li>compute instance (on demand, reserved, spot)\n<ul>\n<li>kubernetes cluster need at least 3.5GB of RAM</li>\n</ul>\n</li>\n<li>load balancer</li>\n<li>disk storage</li>\n<li>container registry</li>\n<li><a href=\"https://georgepaw.medium.com/how-to-run-the-cheapest-kubernetes-cluster-at-1-per-day-9287abb90cee\">https://georgepaw.medium.com/how-to-run-the-cheapest-kubernetes-cluster-at-1-per-day-9287abb90cee</a></li>\n</ul>\n<h4 id=\"nat-gateway-비용이-은근-많이-나올-수-있음\" style=\"position:relative;\"><a href=\"#nat-gateway-%EB%B9%84%EC%9A%A9%EC%9D%B4-%EC%9D%80%EA%B7%BC-%EB%A7%8E%EC%9D%B4-%EB%82%98%EC%98%AC-%EC%88%98-%EC%9E%88%EC%9D%8C\" aria-label=\"nat gateway 비용이 은근 많이 나올 수 있음 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NAT gateway 비용이 은근 많이 나올 수 있음</h4>\n<ul>\n<li>프라이빗망의 인스턴스가 퍼블릭에 접근해야 하는 경우 통신됨</li>\n<li>S3에 업로드/다운로드가 많이 일어난다면 비용 폭탄\n<ul>\n<li>S3 전용 VPC Endpoint를 쓰면 무료라고 한다</li>\n<li>S3와 DynamoDB는 Gateway 형식의 Endpoint. VPC당 20개 쓸 수 있음</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"serverless\" style=\"position:relative;\"><a href=\"#serverless\" aria-label=\"serverless permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Serverless</h2>\n<p>채팅서비스에서의 람다가 적합하지 않을 수도 있겠다\n처음엔 인스턴트성이 강해서 필요할때만 켜지는게 효율적이다 생각했는데\n콜드스타트 문제로 처음 응답이 느릴 수 있고\n그걸 해결하고자 계속 켜지게하면 사용시간이 늘면서 비용이 늘고 람다를 쓰는 의미가 없어질 수도 있다\nGPT도 동일하게 말해준다. 지속실행이 어렵고, 사용자가 많아지면 비용이 급증하고, 웹소켓 상태 관리가 어렵고 높은 지연시간이 있다</p>\n<ul>\n<li>Lambda는 <strong>요청당 비용</strong>이 발생하므로, 사용자마다 개별 Lambda가 떠 있으면 <strong>비용 부담이 큼</strong></li>\n</ul>\n<p>그래서 fargate를 쓰는게 대안이고 redis pub/sub도 써서 메시지 브로드캐스팅용으로 쓰기를 제안한다</p>\n<p>데이터베이스는</p>\n<ul>\n<li>실시간 메시지 전송은 Elasticache</li>\n<li>채팅 로그 단순 저장은 DynamoDB, (유저 정보도 여기 저장하지 못할 이유가 없다)</li>\n<li>채팅방/유저 데이터 관리는 RDS</li>\n</ul>\n<h4 id=\"람다를-기가-막히게-사용하고-싶다--큐와-함께\" style=\"position:relative;\"><a href=\"#%EB%9E%8C%EB%8B%A4%EB%A5%BC-%EA%B8%B0%EA%B0%80-%EB%A7%89%ED%9E%88%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B3%A0-%EC%8B%B6%EB%8B%A4--%ED%81%90%EC%99%80-%ED%95%A8%EA%BB%98\" aria-label=\"람다를 기가 막히게 사용하고 싶다  큐와 함께 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>람다를 기가 막히게 사용하고 싶다 + 큐와 함께</h4>\n<p>왜 람다가 좋으냐</p>\n<p>람다를 써도 될까 람다를 쓰면 안되는 경우</p>\n<p>pLimit\n팬아웃\n큐와의 조합</p>\n<p>콜드스타트는 여전히 느리고,\n어느순간 트래픽이 폭증하면서 온디멘드와 별반 차이가 없어졌고,\n오만 수단을 다 동원해도 배포가 너무 느림</p>\n<h4 id=\"서버리스를-선호\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84%EB%A6%AC%EC%8A%A4%EB%A5%BC-%EC%84%A0%ED%98%B8\" aria-label=\"서버리스를 선호 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버리스를 선호</h4>\n<p>아키텍처를 그릴 때 서버리스로 가능한지 먼저 확인한다\n서버리스로 할 수 없는 특징이 없다면 서버리스로 시도한다\n관리포인트가 줄어드는점\n모듈화가 되어서 다른 서비스 연결이 잘 되는점\n가벼운점\n작업의 실행을 보장할 수 있다</p>\n<p>서버리스로 하기 어려운 특징이 어떤게 있냐면\n이번회사를 다니면서 백엔드 서버가 딱 있으니까 좋다고 느낀게 있었다\n쿼리로 데이터 관리할 수 있는 점 - 트랜잭션\n머신러닝처럼 컴퓨팅 성능이 중요한 경우\n실시간성이 중요한 서비스</p>\n<p>그래서 람다의 한계를 배우게 된다</p>\n<ul>\n<li>지속 연결이 필요하면 못 쓴다</li>\n<li>빠른 응답이 필요하면 못 쓴다</li>\n</ul>\n<p>fargate도 서버리스 컨테이너 서버이기 때문에 서버리스를 쓰는거긴 하다</p>\n<p>서버가 필요한 작업</p>\n<ul>\n<li>데이터베이스에 접근</li>\n<li>api 핸들링 (클라이언트에서 가능할듯)</li>\n<li>모니터링?</li>\n</ul>\n<h4 id=\"람다의-약점\" style=\"position:relative;\"><a href=\"#%EB%9E%8C%EB%8B%A4%EC%9D%98-%EC%95%BD%EC%A0%90\" aria-label=\"람다의 약점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>람다의 약점</h4>\n<ul>\n<li>느린 시작</li>\n<li>모노리스에 비해 통신의 비용이 든다(마이크로서비스라면 비슷)</li>\n</ul>\n<p>로컬 테스트와 배포된 람다 간에 연결성을 높여보도록 구성해봐야겠다</p>\n<p>serverless에 배포 전 로컬 테스트.\n배포 후 자동 테스트\n배포 후 에러 처리</p>\n<h4 id=\"서버리스-프레임워크-단점\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84%EB%A6%AC%EC%8A%A4-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EB%8B%A8%EC%A0%90\" aria-label=\"서버리스 프레임워크 단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버리스 프레임워크 단점</h4>\n<ul>\n<li>도큐먼트</li>\n<li>어떤 입력값을 쓸 수 있는지 나와있는 문서가 없다\n<ul>\n<li>cloudformation 값을 참고 할 수 있음</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"람다를-큰-규모로-사용할-때-뼈대를-잡아주는-프레임워크\" style=\"position:relative;\"><a href=\"#%EB%9E%8C%EB%8B%A4%EB%A5%BC-%ED%81%B0-%EA%B7%9C%EB%AA%A8%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C-%EB%BC%88%EB%8C%80%EB%A5%BC-%EC%9E%A1%EC%95%84%EC%A3%BC%EB%8A%94-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC\" aria-label=\"람다를 큰 규모로 사용할 때 뼈대를 잡아주는 프레임워크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>람다를 큰 규모로 사용할 때 뼈대를 잡아주는 프레임워크</h4>\n<ul>\n<li><a href=\"https://middy.js.org/\">middy</a></li>\n<li><a href=\"https://docs.powertools.aws.dev/lambda/typescript/latest/\">aws powertools</a></li>\n</ul>\n<h2 id=\"aws\" style=\"position:relative;\"><a href=\"#aws\" aria-label=\"aws permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS</h2>\n<p>연결된 서비스 : serverless, cloud, gcp, azure, container</p>\n<h3 id=\"신규-업데이트-확인\" style=\"position:relative;\"><a href=\"#%EC%8B%A0%EA%B7%9C-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%ED%99%95%EC%9D%B8\" aria-label=\"신규 업데이트 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>신규 업데이트 확인</h3>\n<ul>\n<li>신규 업데이트 확인\n<ul>\n<li>aws blog</li>\n<li>aws reinvent</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"네트워크\" style=\"position:relative;\"><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC\" aria-label=\"네트워크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네트워크</h3>\n<ul>\n<li>[[Network]]</li>\n<li>격리\n<ul>\n<li>vpc</li>\n</ul>\n</li>\n<li>외부 연결</li>\n</ul>\n<h3 id=\"컴퓨팅\" style=\"position:relative;\"><a href=\"#%EC%BB%B4%ED%93%A8%ED%8C%85\" aria-label=\"컴퓨팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컴퓨팅</h3>\n<ul>\n<li>서버</li>\n<li>컨테이너</li>\n</ul>\n<h3 id=\"스토리지\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80\" aria-label=\"스토리지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스토리지</h3>\n<ul>\n<li>fully management service\n<ul>\n<li>rds</li>\n<li>aurora</li>\n</ul>\n</li>\n<li>serverless</li>\n</ul>\n<h2 id=\"vpc\" style=\"position:relative;\"><a href=\"#vpc\" aria-label=\"vpc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VPC</h2>\n<p>외부 - VPC - AZ - subnet - instance - route table - igw (subnet을 퍼블릭으로 만들어주는 것과 같은 효과) - nat gateway (subnet이 private 상태로 인터넷 연결) - NACL (control ALLOW and DENY) - security group (control only ALLOW)\nVPC Flow Logs</p>\n<ul>\n<li>네트워크 트래픽 정보를 캡쳐한 것을 볼 수 있다</li>\n<li>VPC 안에서 개별로 설정</li>\n</ul>\n<p>VPC Peering</p>\n<ul>\n<li>VPC 끼리 통신할 수 있도록 해주는 것</li>\n</ul>\n<p>VPC Endpoints</p>\n<ul>\n<li>외부에 있는 S3에서 VPC Endpoint를 통해서 다른 VPC에 있는 프라이빗 인스턴스에 접근 가능</li>\n</ul>\n<p>ENI</p>\n<ul>\n<li>실질적으로 인스턴스와 Security group, VPC 등이 연결되는 네트워크 인터페이스 장비라고 보면 될 듯</li>\n</ul>\n<h2 id=\"iam\" style=\"position:relative;\"><a href=\"#iam\" aria-label=\"iam permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IAM</h2>\n<p>IAM = Identity and Access Management, Global Service\nRoot account created by default\nUsers - people within your organization, can be grouped\nGroups only contain users, not other groups\nUsers don't have to belong to a group, and user can belong to multiple groups\naccount id에다가 alias를 달 수 있다 fnckop 처럼\nfnckop에 iam 유저로 로그인하면 account id를 같은 걸 쓴다</p>\n<p>IAM: Permissions\npolicies(정책) - contains effect, action, resource, (principal), (sid)\n정책은 최소 권한의 원칙으로 관리하는 걸 권장함. 유저가 딱 필요한 권한만 주는 것\n정책은 그룹에도 걸 수 있고, 유저에도 걸 수 있음\nprincipal은 account/user/role 중에 특정 대상에만 적용하게 하기 위한 조건</p>\n<ul>\n<li>근데 그러면 정책 자체가 특정 대상에 걸리는건데 principal이 필요한가?</li>\n<li>리소스 기반 정책이 있고, 자격 증명 기반 정책이 있다.</li>\n<li>principal은 리소스 기반 정책에 필요하고, 유저나 그룹에 거는건 자격 증명 기반 정책</li>\n</ul>\n<h4 id=\"iam-guidelines--best-practices\" style=\"position:relative;\"><a href=\"#iam-guidelines--best-practices\" aria-label=\"iam guidelines  best practices permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IAM Guidelines &#x26; Best Practices</h4>\n<p>Don't use the root account except for AWS account setup\nOne physical user = One AWS user\nAssign users to groups and assign permissions to groups</p>\n<p>Shared Responsibility Model for IAM\nAWS가 책임지는 것</p>\n<ul>\n<li>인프라</li>\n<li>설정과 취약점 분석</li>\n<li>컴플라이언스 검증</li>\n</ul>\n<p>유저가 책임져야 하는 것</p>\n<ul>\n<li>유저, 롤, 정책 등에 대한 관리 및 모니터링</li>\n<li>MFA를 사용하는 것</li>\n<li>키를 자주 바꿔주는 것</li>\n<li>적절한 권한을 설정하는 것</li>\n<li>접근에 대한 분석, 권한 리뷰</li>\n</ul>\n<h2 id=\"storage\" style=\"position:relative;\"><a href=\"#storage\" aria-label=\"storage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Storage</h2>\n<p>glacier\n<a href=\"https://bluese05.tistory.com/35\">https://bluese05.tistory.com/35</a></p>\n<ul>\n<li>데이터 가져오고 검색하는게 좀 한계가 있어서 활용도는 떨어지는 듯</li>\n</ul>\n<h4 id=\"메시지-큐\" style=\"position:relative;\"><a href=\"#%EB%A9%94%EC%8B%9C%EC%A7%80-%ED%81%90\" aria-label=\"메시지 큐 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>메시지 큐</h4>\n<p>sqs에 실패처리용 큐를 하나 만들어서 거기에 담아서 에러를 확인한다.\n메시지큐에서 실패한 것들을 받으면 람다를 실행하게 해서 오류처리 할 수 있다</p>\n<h2 id=\"hands-on\" style=\"position:relative;\"><a href=\"#hands-on\" aria-label=\"hands on permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hands-on</h2>\n<h4 id=\"aws-beanstalk-eip-없이-접속하기\" style=\"position:relative;\"><a href=\"#aws-beanstalk-eip-%EC%97%86%EC%9D%B4-%EC%A0%91%EC%86%8D%ED%95%98%EA%B8%B0\" aria-label=\"aws beanstalk eip 없이 접속하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>aws beanstalk eip 없이 접속하기</h4>\n<ul>\n<li>vpc 연결 안된다고 떴던 에러 해결하면 될 듯</li>\n<li>내 vpc 와 비교</li>\n<li>라우팅 테이블에 igw 가 있는지 없는지가 다르다</li>\n</ul>\n<p>여기에 igw 설정을 하지 않고도 사용할 수 있는 방법이 있을까?\n지금 만약에 바로 igw를 연결하면 default vpc가 외부와 연결되서 보안이 다 뚫릴 것 같다.\n근데 eb를 외부 igw 연결된 것만 생성 가능한 것도 이상하다.\nvpc endpoint 라는 것을 이용하면 된다고 하는 것 같다</p>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/vpc-vpce.html\">https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/vpc-vpce.html</a></p>\n<p>기본 요구사항은 vpc가 퍼블릭이면 igw가 연결되어 있어야 하고,\n프라이빗이면 NAT 디바이스를 이용하라고 한다.</p>\n<p>app-private 에 NAT 가 연결되어 있어서 이걸로 테스트해보면 되겠다.\n로드밸런서와 인스턴스 둘 다 private으로? -> 된다</p>\n<p>nat를 쓴다는 것 자체가 하나의 EIP 를 쓴다는 것이긴 하다.\nNAT 없이 private으로 만들고 load balancer를 연결할 수 있을까?\nbeanstalk은 정말로 public에 대한 연결을 필수로 요구하는 것인가?\nvpc endpoint를 써보자</p>\n<h2 id=\"aws-자격증\" style=\"position:relative;\"><a href=\"#aws-%EC%9E%90%EA%B2%A9%EC%A6%9D\" aria-label=\"aws 자격증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS 자격증</h2>\n<p>4종류 12개</p>\n<ol>\n<li>프렉티셔널 (기초)</li>\n<li>Associate (일반)</li>\n<li>Pro</li>\n<li>Special (Pro와 같은 레벨)</li>\n</ol>\n<p>Associate</p>\n<ul>\n<li>Developer</li>\n<li>Solutions Architect</li>\n<li>SysOps Administrator\nPro</li>\n<li>DevOps</li>\n<li>Solutions Architect\nSpecial</li>\n<li>Advanced Networking</li>\n</ul>\n<p>예제 사이트\n<a href=\"https://www.examtopics.com/exams/amazon/aws-devops-engineer-professional/\">https://www.examtopics.com/exams/amazon/aws-devops-engineer-professional/</a>\n덤프 문제 풀이\n<a href=\"https://blog.naver.com/PostView.naver?blogId=asd7005201&#x26;logNo=222606780619&#x26;parentCategoryNo=&#x26;categoryNo=23&#x26;viewDate=&#x26;isShowPopularPosts=true&#x26;from=search\">https://blog.naver.com/PostView.naver?blogId=asd7005201&#x26;logNo=222606780619&#x26;parentCategoryNo=&#x26;categoryNo=23&#x26;viewDate=&#x26;isShowPopularPosts=true&#x26;from=search</a></p>\n<p>수험 가이드\n<a href=\"https://gist.github.com/serithemage/df61aaf396046eff7244b6eaa8d58d4a\">https://gist.github.com/serithemage/df61aaf396046eff7244b6eaa8d58d4a</a></p>\n<p><a href=\"https://goddaehee.tistory.com/194\">https://goddaehee.tistory.com/194</a></p>\n<h4 id=\"aws-developer-associate\" style=\"position:relative;\"><a href=\"#aws-developer-associate\" aria-label=\"aws developer associate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS Developer Associate</h4>\n<p><a href=\"https://www.notion.so/aws-developer-associate-e91595fe733d494d99db3458e3535677\">https://www.notion.so/aws-developer-associate-e91595fe733d494d99db3458e3535677</a></p>\n<p>덤프</p>\n<ul>\n<li><a href=\"https://dumps.kr/dumps/amazon-dva-c01/3\">https://dumps.kr/dumps/amazon-dva-c01/3</a></li>\n<li><a href=\"https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/\">https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/</a></li>\n<li><a href=\"https://www.knowledgehut.com/practice-tests/aws-certified-developer-associate-practice-test/Result/TWZCVHpBWktwK0JSS05pZkhvNVJxY2JDWkxFMzRPMmY=\">https://www.knowledgehut.com/practice-tests/aws-certified-developer-associate-practice-test/Result/TWZCVHpBWktwK0JSS05pZkhvNVJxY2JDWkxFMzRPMmY=</a></li>\n</ul>\n<h4 id=\"saa\" style=\"position:relative;\"><a href=\"#saa\" aria-label=\"saa permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SAA</h4>\n<ul>\n<li><a href=\"https://www.udemy.com/course/aws-certified-solutions-architect-associate-saa-c03/\">강의</a></li>\n<li><a href=\"https://github.com/serithemage/AWSCertifiedSolutionsArchitectUnofficialStudyGuide\">요약 2019 버전</a></li>\n</ul>\n<p>덤프</p>\n<ul>\n<li><a href=\"https://dumps.kr/dumps/amazon-dva-c01\">https://dumps.kr/dumps/amazon-dva-c01</a></li>\n<li><a href=\"https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/\">https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/</a></li>\n</ul>\n<p>범위\u001e</p>\n<ul>\n<li>IAM</li>\n<li>EC2</li>\n<li>ELB, ASG</li>\n<li>RDS + Aurora + Elasticache</li>\n<li>Route 53</li>\n<li>S3</li>\n<li>CloudFront, AWS Global Accelerator</li>\n<li>AWS Storage Extras (snow family?, FSx?)</li>\n<li>SQS, SNS, Kinesis, Active MQ</li>\n<li>ECS, Fargate, ECR, EKS</li>\n<li>Lambda, Lambda@Edge, Dynamodb, API Gateway, Step Functions, Amazon Cognito</li>\n<li>Database (RDS, Aurora, ElastiCache, DynamoDB, S3, DocumentDB, Neptune, Keyspaces, OLDB, Timestream)</li>\n<li>Data Analytics (Athena, Redshift, Opensearch, EMR, QuickSight, Glue, Lake Formation, Kinesis Data Analytics, MSK)</li>\n<li>ML (Rekognition, Transcribe, Polly, Translate, Lex+Connect, Comprehend, Comprehend Medical, SageMaker, Forecast, Kendra, Personalize, Textract)</li>\n<li>Monitoring (CloudWatch - Metrics, Logs, Agent, Logs Agent, Alarms, EventBridge, CloudTrail)</li>\n<li>Security (KMS, SSM, Parameter Store, CloudHSM, Shield, WAF)</li>\n<li>VPC</li>\n<li>DR, Migration</li>\n</ul>\n<p>EBS, EFS, FSx</p>\n<ul>\n<li>EBS : 하나의 인스턴스에 연결해서 사용, 단일 AZ에 저장, 볼륨 단위 관리, EFS 보다 빠름, 다른 인스턴스로 이동은 가능</li>\n<li>EFS : 자체적으로 사용 가능, 여러 AZ에 중복 저장, 파일 단위 관리, 자동 확장, NAS 쓰는 느낌</li>\n<li>EC2 생성 시 EBS는 기본으로 연결되고 EFS, FSx는 따로 생성되어있으면 연결 가능하다</li>\n<li>인스턴스 스토어라는 휘발성 저장소도 있는데 특정 인스턴스 유형으로만 시작할때만 연결할 수 있음</li>\n<li>FSx : EFS 보다 고성능, 다양한 기능을 가진 서비스</li>\n</ul>\n<p>다른 스토리지 서비스</p>\n<ul>\n<li>DataSync : 온프레미스에 저장된 데이터를 AWS로 옮겨줌</li>\n<li>Snowball : 초대용량 데이터를 옮길 때 AWS에서 지원해줌</li>\n</ul>\n<p>Athena : S3에 저장되어 있는 로그를 쿼리할 수 있는 기능</p>\n<hr>\n<h2 id=\"test-전략\" style=\"position:relative;\"><a href=\"#test-%EC%A0%84%EB%9E%B5\" aria-label=\"test 전략 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Test 전략</h2>\n<h4 id=\"how-to-test\" style=\"position:relative;\"><a href=\"#how-to-test\" aria-label=\"how to test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>how to test</h4>\n<p>istio를 쓰면 플로우 모니터링 하긴 용이하다</p>\n<h4 id=\"server-stress-test\" style=\"position:relative;\"><a href=\"#server-stress-test\" aria-label=\"server stress test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>server stress test</h4>\n<ul>\n<li>redis i/o test</li>\n<li>go http server</li>\n<li>kubernetes pod</li>\n<li>simple http server stress test</li>\n</ul>\n<ol>\n<li>find report</li>\n<li>manual test\n<ul>\n<li>make test code\n<ul>\n<li>while</li>\n<li>concurrent</li>\n</ul>\n</li>\n<li>curl\n<ul>\n<li><code class=\"language-text\">ulimit -n</code> -> 1024 (default) -> <code class=\"language-text\">ulimit -n 10000</code></li>\n<li><code class=\"language-text\">while true; do curl localhost; done</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>it depends on CPU, memory</li>\n</ul>\n<h2 id=\"temp\" style=\"position:relative;\"><a href=\"#temp\" aria-label=\"temp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TEMP</h2>\n<p>iam 역할과 정책 비교</p>\n<ul>\n<li>정책은 사용자, 역할, 그룹에 할당하는 실제 규칙</li>\n</ul>\n<p>irsa</p>\n<ul>\n<li>IAM Roles for Service Accounts</li>\n</ul>\n<h4 id=\"변경-파일만-검사하는-lint\" style=\"position:relative;\"><a href=\"#%EB%B3%80%EA%B2%BD-%ED%8C%8C%EC%9D%BC%EB%A7%8C-%EA%B2%80%EC%82%AC%ED%95%98%EB%8A%94-lint\" aria-label=\"변경 파일만 검사하는 lint permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>변경 파일만 검사하는 lint</h4>\n<ul>\n<li>git diff\n<ul>\n<li><code class=\"language-text\">git diff $(git merge-base origin/${base} origin/${head})..origin/${head} --name-only --diff-filter=d | grep -E '.(js|jsx|ts|tsx)$'</code></li>\n<li>git merge-base : base 브랜치와 타겟 브랜치의 공통 조상을 찾는다</li>\n<li>-name-only : 파일 이름만 출력한다.</li>\n<li>-diff-filter=d : 삭제된 파일은 제외한다</li>\n<li>grep -E : 특정 확장자만 필터링</li>\n</ul>\n</li>\n<li>github actions에서 fetch 기본값은 최신 커밋 하나만 가져오는 건데 공통조상을 찾기 위해 전체 히스토리를 가져옴</li>\n</ul>\n<h4 id=\"인프라\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%ED%94%84%EB%9D%BC\" aria-label=\"인프라 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인프라</h4>\n<ul>\n<li>subnet, route table\n<ul>\n<li>route table에 변경할 서브넷이 aws에는 만들어져있고, 이를 테라폼으로 안가져와서 이걸 가져와서 route table에 적용할지, 바로 그냥 스트링으로 입력할지?</li>\n</ul>\n</li>\n<li>스테이징 서버 subnet 끼리 연결해줄 수 있도록 연결</li>\n<li>terraform import 로 aws에서 땡겨올 수 있다.\n<ul>\n<li>terraform으로 이름만 만들어서 import 하고 내용 입력해서 plan해서 쓸 수 있다.</li>\n<li>plan 해서 aws랑 sync하고 원하는 상태로 변경.</li>\n<li>각 폴더가 루트라서 data.terraform_remote_import 써서 output 만들어서 데이터 받아온다.\n<ul>\n<li>루트끼리 데이터 교환을 바로 못하나? 모듈에서는 됐던것 같은데</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>AZ존 a, c에 비해 b, d가 잘 안되는 이슈가 있다.\n<ul>\n<li>주로 a를 쓰고 c는 eks 하면서 조금씩 추가하고 있다.</li>\n</ul>\n</li>\n<li>eks subnet 자동으로 만들어진 것들\n<ul>\n<li>통신을 위한 포트가 랜덤으로 열려있음</li>\n<li>nlb client는 0.0.0.0으로 열려있고 health는 특정 서브넷마다 할당 되있다. 왜그렇지?\n<ul>\n<li>임의 설정 가능한지 어노테이션 확인</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>NLB\n<ul>\n<li>웹소켓 등 다른 프로토콜 쓸 수 있다</li>\n<li>빠르다</li>\n<li>바이패스로 지나가는 느낌이라 시큐리티 그룹으로 설정 못해준다</li>\n</ul>\n</li>\n<li>테라폼\n<ul>\n<li>버전 업데이트에 따른 수정사항이 생기면 내가 바꾼 거랑 섞여서 보기 힘들다</li>\n</ul>\n</li>\n<li>인그레스 컨트롤러\n<ul>\n<li>class로 인그레스 어떤거 쓸지 선택, 디폴트 elb, nlb는 선택 필요</li>\n<li>stable/nginx-ingress가 만료되서 새로 업데이트 해야한다</li>\n<li>EKS 업데이트 시 인스턴스가 재생성 해야되서 elb에서 다시 수동으로 인스턴스를 잡아줘야하는 이슈가 있다\n<ul>\n<li>eks internal로 직접 만들어서 수동 설정하는게 있다</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>kubectx 로 컨텍스트 설정</li>\n<li>운영에서는 에러 뜨면 바로 반응 오는게 맞다</li>\n<li>elb - nlb 일 필요 없다</li>\n<li>ldap, saml #infra\n<ul>\n<li>aws login 등 할 때 마이크로소프트 saml 이용해서 중앙에서 권한 제어한다.</li>\n</ul>\n</li>\n<li>browser에서\n<ul>\n<li>response-header에 content-security-policy로 컨텐츠 http 제한, https는 허용하는 식으로</li>\n</ul>\n</li>\n<li>새로운 k8s 리소스 생성하기\n<ul>\n<li>\n<ol>\n<li>helm create 하고 운영서버 데이터 적당히 옮긴다</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>argocd 웹 들어가서 앱 생성</li>\n</ol>\n</li>\n</ul>\n</li>\n<li>NLB -> ALB\n<ul>\n<li>주소 앞에 www를 붙이는 처리를 기존에는 apache 웹서버를 이용해서 했었는데, ALB에서 리다이렉트 처리가 가능해서 ALB를 사용하려 한다.\n<ul>\n<li>관리포인트가 줄어든다</li>\n</ul>\n</li>\n<li>문제는 ALB의 IP 주소가 한번씩 바뀌어서 NLB가 ALB를 못바라본다.</li>\n<li>그래서 람다를 이용해 NLB가 ALB를 찾을 수 있게 해주고 있다.</li>\n</ul>\n</li>\n<li>monorepo with yarn workspace\n<ul>\n<li>같은 프로젝트 안에 다른 서비스끼리 참조하면 임포트를 해줘야하나?</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>캐시\n<ul>\n<li>캐시 전체 페이지 하고 있는데 비회원,회원 구분된 페이지에서 비회원화면이 캐시되있으면 회원이 접속해도 캐시된 화면 출력되는데 그래서 새로운 구분값이 추가되면 캐시페이지도 구분해줘야한다.</li>\n</ul>\n</li>\n<li>장애 : 서비스가 의도한 대로 동작하지 않는 모든 것</li>\n<li>장애감지 - telegram 으로 alert megazone과 구축</li>\n<li>/var/log/mesages에 리눅스의 기본적인 로그가 남고 어떤 프로세스가 죽었는지 확인됨</li>\n<li>인프라 모니터링 + APM 으로 요청 검사</li>\n<li>빈스톡의 nginx 기본 설정이 잘 막혀있도록 설정되어있음</li>\n</ul>\n<h4 id=\"ec2-os-패치\" style=\"position:relative;\"><a href=\"#ec2-os-%ED%8C%A8%EC%B9%98\" aria-label=\"ec2 os 패치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ec2 os 패치</h4>\n<ul>\n<li>devops, sta running 으로 검색</li>\n<li>인스턴스 백업\n<ul>\n<li>이미지 및 템플릿 - 이미지 생성 = 스냅샷 생성</li>\n<li>이미지 이름은 인스턴스 이름 + BACKUP-날짜</li>\n<li>운영에서는 재부팅 안 함을 활성화</li>\n<li>AMI 에 생성됨, 볼륨 생성됨, 스냅샷 생성됨</li>\n</ul>\n</li>\n<li>시연은 JUMPSERVER를 이용해서 접속해서 했음\n<ul>\n<li>(근데 끊어져서 서버가 뻑난적이 있음. 접속이 끊어지면 안됨)</li>\n</ul>\n</li>\n<li>os 확인 - centos</li>\n<li>sudo yum update -x docker* (docker 관련 리소스는 업데이트 안함)\n<ul>\n<li>docker는 업데이트를 안했는데도 도커가 재시작 되는 경우가 있음</li>\n<li>운영에서는 해당 인스턴스를 LB에서 빼주는게 안전</li>\n<li>도커는 업데이트 해도 되는데 파라미터 수정해줘야 함</li>\n</ul>\n</li>\n<li>리눅스 재시작\n<ul>\n<li>sudo shutdown -r now</li>\n</ul>\n</li>\n<li>패치 확인\n<ul>\n<li>last reboot</li>\n<li>version 이 다르게 표시된 걸로 확인</li>\n</ul>\n</li>\n<li>도커 컨테이너 확인해서 실행 안되어있으면 실행</li>\n<li>/usr/lib/systemd/system/docker.service\n<ul>\n<li>ExecStart=/usr/bin/dockerd 이 줄에 -H 옵션이 붙어있다면</li>\n<li>뒤에 -H 붙이지 않는 걸로 수정해줘야 함</li>\n<li>-H fd:// --containerd=/run/containerd/containerd.sock</li>\n</ul>\n</li>\n<li>수정파일 적용\n<ul>\n<li>sudo systemctl daemon-reload</li>\n</ul>\n</li>\n</ul>\n<p>EB Incorrect application version found on all instances. Expected version 에러</p>\n<ul>\n<li>인스턴스 1개면 EC2 리부팅 해주면 다시 됨</li>\n</ul>\n<h4 id=\"eks\" style=\"position:relative;\"><a href=\"#eks\" aria-label=\"eks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>eks</h4>\n<p>개발자 작업내역 로깅?\n개발자별 권한관리</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">awslogs get /aws/lambda/lambda-func-fnc-stg-an2-send-email-nhn ALL \\\n  --start='1h ago' --watch \\\n  --profile ums-dev --aws-region ap-northeast-2</code></pre></div>\n<h4 id=\"점프서버\" style=\"position:relative;\"><a href=\"#%EC%A0%90%ED%94%84%EC%84%9C%EB%B2%84\" aria-label=\"점프서버 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>점프서버</h4>\n<p>jumpserver 안쓰면 다른 ssh 툴로 접속해야 하나?\ndocker 업데이트 후 수정해야하는 것과 아닌 것의 차이는?\ndockerfile은 어디에 있을까?</p>\n<ul>\n<li>서버 접근 제어 솔루션</li>\n<li>점프서버를 aws2020에 설치하여 사용</li>\n<li>누가 언제 접속하고 어떤걸 했는지 로깅</li>\n<li>동영상으로도 저장</li>\n</ul>\n<h4 id=\"시스템-버전-업데이트-어떻게-할-것인가\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%B2%84%EC%A0%84-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80\" aria-label=\"시스템 버전 업데이트 어떻게 할 것인가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시스템 버전 업데이트 어떻게 할 것인가</h4>\n<p>#infra\nec2, rds 업데이트\nstg-eks 는 terraform\nrds 는 aws console에서 수정 눌러서 업데이트</p>\n<ul>\n<li>블루/그린 배포 추가된듯?</li>\n<li>mysql 5.6 -> 8로 업데이트 시 인스턴스 변경 필요한데 어떻게 하면 사이드이펙이 적을까</li>\n</ul>\n<p>500에러\nALB에서 500 에러가 발생 가능하다\nELB는 가지고 있는 큐가 1024개 제한이 있다</p>\n<h4 id=\"rds-디비-접속\" style=\"position:relative;\"><a href=\"#rds-%EB%94%94%EB%B9%84-%EC%A0%91%EC%86%8D\" aria-label=\"rds 디비 접속 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RDS 디비 접속</h4>\n<p>#infra\n서브넷이 private용으로 돼있는데\nsecurity group 만 풀어주면 접속이 되나? 아니면 서브넷도 풀어줘야 하나?\n서브넷이 nat 만 열려있어서 그렇다. igw 연결 시켜줘야 했음.\n근데 db-public을 만드는 방향으로 가야함</p>\n<h4 id=\"iam-1\" style=\"position:relative;\"><a href=\"#iam-1\" aria-label=\"iam 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IAM</h4>\n<p>IAM 적용에는 시간이 걸린다 #infra</p>\n<h4 id=\"키네시스-로컬-테스트\" style=\"position:relative;\"><a href=\"#%ED%82%A4%EB%84%A4%EC%8B%9C%EC%8A%A4-%EB%A1%9C%EC%BB%AC-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"키네시스 로컬 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>키네시스 로컬 테스트</h4>\n<ul>\n<li>docker-compose 실행</li>\n<li>stream 생성</li>\n<li>큐에 넣기</li>\n<li>이터레이터 조회\n<ul>\n<li>이터레이터로 레코드 조회</li>\n</ul>\n</li>\n<li>레코드 데이터 base64 디코딩</li>\n<li>이터레이터 유효기간 때문에 처음에만 조회가 된다</li>\n<li>이터레이터를 새로 받으면 ~ 된다</li>\n<li>이터레이터를 먼저 환경변수에 세팅하고, 값을 넣으면 그 이터레이터로 조회가능</li>\n</ul>\n<p>로컬 키네시스 테스트</p>\n<ul>\n<li>이터레이터 하나 확인 (source get_records.sh 하면 환경변수에 저장 가능)\n<ul>\n<li>키네시스로 전송</li>\n<li>레코드 확인 (레코드가 배열로 여러개 있음)</li>\n<li>base64 디코딩</li>\n<li>json 형식으로 변환</li>\n</ul>\n</li>\n</ul>\n<p>stderr, stdout 일 때 처리를 다르게 해줘야 하나..\n#infra</p>\n<p>cdn ->\ncache, cdn을 둬서 사용자가 많아져도 부하를 줄일 수 있다\n헤더를 한줄로 만들어서 람다로 분해해서 cdn에서 인식하게 한다</p>\n<ul>\n<li>조작을 방지하기 위해</li>\n</ul>\n<p>#infra</p>\n<p>[[이벤트 드리븐]] #infra</p>\n<ul>\n<li>\n<p>쿠버네티스</p>\n<ul>\n<li>인그레스로 연결 접속 허용하는 사람 설정</li>\n<li>인그레스 여러 개 사용하면서 적합한 것 사용</li>\n</ul>\n</li>\n<li>\n<p>lb용으로 서브넷 따로 따져있음</p>\n</li>\n<li>\n<p>스테이지는 스팟인스턴스 사용</p>\n</li>\n<li>\n<p>디비는 메모리많은걸 써서 캐시 잘 되게 함. 조인할때도 그렇고 메모리에 적재할때 부족하면 느려져서 많으면 좋음</p>\n</li>\n<li>\n<p>eks_manage_user 로 하면 생성할때만 설정가능해서 role로 관리하는게 나을수도</p>\n</li>\n<li>\n<p>proxy_protocol_v2 -> 클라이언트 ip 전달을 위해 헤더에 값 넣어주기 위한 설정 (<a href=\"https://purpleio.atlassian.net/wiki/spaces/PURPLEIO/pages/168067247/AWS+ELB+ALB+NLB+CLB+nginx+ingress+EC2\">https://purpleio.atlassian.net/wiki/spaces/PURPLEIO/pages/168067247/AWS+ELB+ALB+NLB+CLB+nginx+ingress+EC2</a>)</p>\n<ul>\n<li>nlb 는 ppv2 지원</li>\n<li>alb 는 x-forwarded-for 헤더에 기본 지원</li>\n<li>nlb 에 annotation 설정 해주면 됨</li>\n<li>configMap 에도 설정</li>\n<li>타겟 그룹에 preserve client ip address 값에 따라\n<ul>\n<li>sg에 클라이언트 ip 를 열어줘야 할 수 있음</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>디비는 테라폼으로 같이 묶여있으면 지울때 날라가면 크리티컬</p>\n<ul>\n<li>그냥 테라폼코드를 지우면 삭제하는 동작을 해서 따로 안보게 하는 설정을 해줘야 함</li>\n</ul>\n</li>\n</ul>\n<p>blue, green은 statefulset 으로 되있는데 다른건 뭘로 되어있는지? &#x3C;-> deployment</p>\n<ul>\n<li>deployment 대신 쓰는건데</li>\n<li>service를 다른걸 쓴다</li>\n<li>파드가 죽다 살아나도 그 파드 그대로 사용된다</li>\n</ul>\n<p>ec2에 설치된 오라클은 플러그인같은걸 쓰고 있었는데 RDS에서는 못써서, 근데 개선할 예정</p>\n<p>lb controller</p>\n<ul>\n<li>ELB, NLB 를 쿠버네티스가 관리할 수 있게 해주는 컨트롤러</li>\n<li>ingress controller가 예전버전인데 이걸 써야 nlb - ingress 연결이 된다?</li>\n<li><a href=\"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html\">https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html</a></li>\n</ul>\n<p>CLB에 비해 NLB 의 달라진 점은 어떤게 있지</p>\n<p>버전을 variable로 다 빼도 될까?</p>\n<ul>\n<li>차트별로 버전 확인하려면 어떤 리소스인지 봐야되서 왔다갔다 하기 번거로울 수 있다</li>\n</ul>\n<p>locals랑 variables랑 뭐가 다르지</p>\n<ul>\n<li>locals 는 상수</li>\n<li>variables 는 terrafrom 명령어 칠 때 사용자가 변수 주입 가능</li>\n<li>output 은 모듈 외부에서 값 받아쓸 때 사용 가능</li>\n</ul>\n<p>2023으로 만든거에 helm으로 만든거는 eks 위에서 안뜨나?</p>\n<ul>\n<li>argo를 먼저 띄워놓고 그걸로 띄우나? &#x3C;-> 모니터링 같은 시스템 쪽은 argo로 배포 안해도 될텐데</li>\n<li>helm 자체가 eks 위에서 실행되긴 해야하는데</li>\n</ul>\n<p><a href=\"https://sineui.home.blog/2020/02/29/aws-eks-clb-alb%EB%A1%9C-%EC%9D%B4%EC%A0%84%ED%95%98%EA%B8%B0-1-%EB%B0%B0%EA%B2%BD/\">https://sineui.home.blog/2020/02/29/aws-eks-clb-alb%EB%A1%9C-%EC%9D%B4%EC%A0%84%ED%95%98%EA%B8%B0-1-%EB%B0%B0%EA%B2%BD/</a></p>\n<h4 id=\"argocd\" style=\"position:relative;\"><a href=\"#argocd\" aria-label=\"argocd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>argocd</h4>\n<p>처음 깔면 레포지토리 등록\ngitlab에서 repository > deploy token 에서 토큰 생성 후에 등록\nargocd에서 destination 추가</p>\n<p>a 레코드로 하면 한번에 아이피를 찌르는데\ncname 을 거치면 한번 더 쳐야 되서 a 레코드가 낫다</p>\n<p>argocd에서 kubernetes namespace를 바꿀 때 ingress가 안지워지면 새로운 ingress가 안뜬다. 자동으로 안됨. service나 deployment도 안지워지고 새로운게 뜸</p>\n<hr>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> kubernetes toleration, taint\n<ul>\n<li>taint\n<ul>\n<li>노드에 설정</li>\n<li>팟이 할당 안되도록 하는 설정</li>\n<li>이름을 명시적으로 설정. (ex: system, normal, large)</li>\n<li>tolerations와 함께 써서 특정 노드에만 뜨게 하기 위해 사용</li>\n</ul>\n</li>\n<li>tolerations\n<ul>\n<li>팟에 설정</li>\n<li>key, operator, value, effect 를 taint에 설정된 것과 같게 입력해주면</li>\n<li>taint가 설정 되어 있어도 할당 되게 해줌</li>\n<li>만약 해당 taint값이 없으면 생성이 실패되나?</li>\n<li>node selector와는 어떤 관계지</li>\n<li>node affinity도 있음</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>route 53 연결 해줬는데 인증서가 kolonmall 이 없는걸로 연결되서 400으로 에러남</p>\n<ul>\n<li>인증서 바꿔주면 시간 지나면 적용 됨. 캐시 남아있을 수 있음</li>\n</ul>\n<p>ingress에 nodeSelector가 manage로 되어있던데 eks 만들때는 manage로 tag 걸어논게 없던데 이상없이 잘 떴음. manage는 기본으로 생성되는건가 아니면 이름 없으면 그냥 아무거나 붙는건가?</p>\n<p>kop-api 띄우다가 image 없다고 에러 뜸</p>\n<ul>\n<li>ecr에 lifecycle policy에 50개까지만 저장한다고 설정되어있음</li>\n</ul>\n<p>kop-web, kop-hybris beta 는 kop30-frontend 에서 ingress를 띄워서 연결해서 쓰고 있음</p>\n<p>external dns를 helm으로 띄워서 팟이 인터벌 간격마다 확인하면서 dns 할당하는 역할을 함\n주소 매핑할때는 kubernetes 에 어노테이션 달아주면 되는데, ingress에 hosts 등록되어있어도 되는 거 같다</p>\n<p>keyv-cronjob</p>\n<ul>\n<li>레디스에 쓸데없는 거 쌓인 거 지워주는 크론</li>\n<li>무슨 라이브러리 쓰는게 있는데 그거때문에 데이터가 계속 쌓여서 메모리를 많이 차지해서 임시로 지워주게 처리함</li>\n<li>그 라이브러리가 keyv 일 수 있음</li>\n</ul>\n<p>레디스 elasticache 버전이랑 클라이언트 버전 맞춰주기</p>\n<p>디비나 레디스같은 건 인바운드 열어줘야 할 수 있으니 확인</p>\n<p>하이브리스도 레디스에 로그인 세션 저장해서 사용중</p>\n<ul>\n<li>aws cni\n<ul>\n<li>container network interface</li>\n<li>eks 가 아닌 기본 쿠버네티스를 띄울 때는 calico 등을 썼었는데 그것의 aws 버전</li>\n</ul>\n</li>\n</ul>\n<p>모니터링 테라폼 켤 때 aws cni 에서 ip 할당 안되는 에러 발생\n인스턴스 마다 할당 가능한 ip 제한이 있다 - 근데 xlarge 정도면 충분한듯\naws cni 설정 중에 minimum ip 관련 설정이 있다\naws cni 설정을 지우고 띄워보니 뜬다</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> warm 어쩌고 설정이 어떤 건지 확인</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> 해당 ip 설정 어떻게 하면 좋을지 확인</li>\n<li>aws eks cni\n<ul>\n<li>이 설정이 eks 설정 전체에 되는거라 minumum 설정 때문에 전체 ip가 부족했을 수 있을까?</li>\n<li>warm ip</li>\n<li>warm prefix target\n<ul>\n<li>이걸 4로 했을 때의 의미는?</li>\n<li>이거 말고 다른 설정이 보통 안내되긴 하는데 잘 설정한거맞나?</li>\n<li>ENABLE_PREFIX_DELEGATION 이 설정은 없어도 되나?</li>\n</ul>\n</li>\n<li>minimum ip target\n<ul>\n<li>노드가 처음 나타날 때 최소 IP 할당 개수</li>\n</ul>\n</li>\n<li>l-ipamd</li>\n<li>c6i.xlarge 58 - eni max pods</li>\n</ul>\n</li>\n</ul>\n<p>![[Pasted image 20231102182900.png]]\n<a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html\">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html</a></p>\n<p>eni 할당 모드에 secondary ip mode와 prefix 모드가 있다\n![[Pasted image 20231102170558.png]]\n<a href=\"https://www.eksworkshop.com/docs/networking/prefix/\">https://www.eksworkshop.com/docs/networking/prefix/</a>\n<a href=\"https://dobby-isfree.tistory.com/201\">https://dobby-isfree.tistory.com/201</a></p>\n<ul>\n<li>secondary ip mode가 디폴트인데</li>\n<li>prefix 모드가 새로 나왔고 aws에서 권장하는 옵션</li>\n<li>prefix 모드로 하면 ip 할당에 api 호출이 필요없이 빠르게 된다고 한다.</li>\n</ul>\n<p><a href=\"https://aws.amazon.com/ko/about-aws/whats-new/2022/12/amazon-s3-automatically-enable-block-public-access-disable-access-control-lists-buckets-april-2023/\">https://aws.amazon.com/ko/about-aws/whats-new/2022/12/amazon-s3-automatically-enable-block-public-access-disable-access-control-lists-buckets-april-2023/</a></p>\n<ul>\n<li>s3 정책 수정되어서 최근 s3 버킷은 생성 시 ownership 유형 설정 추가 필요</li>\n</ul>\n<p>loki 설치하니까 너무 팟이 많아서 인스턴스가 더 떠서 다 필요한 건지 확인\n레플리카 줄여서 띄움</p>\n<p>그라파나에서 로키 수동 등록</p>\n<p>그라파나 ldap 로그인 다 허용되서 제한 필요</p>\n<h2 id=\"인프라-레퍼런스\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%ED%94%84%EB%9D%BC-%EB%A0%88%ED%8D%BC%EB%9F%B0%EC%8A%A4\" aria-label=\"인프라 레퍼런스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인프라 레퍼런스</h2>\n<h4 id=\"당근마켓-당근페이-인프라-구축-이야기\" style=\"position:relative;\"><a href=\"#%EB%8B%B9%EA%B7%BC%EB%A7%88%EC%BC%93-%EB%8B%B9%EA%B7%BC%ED%8E%98%EC%9D%B4-%EC%9D%B8%ED%94%84%EB%9D%BC-%EA%B5%AC%EC%B6%95-%EC%9D%B4%EC%95%BC%EA%B8%B0\" aria-label=\"당근마켓 당근페이 인프라 구축 이야기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>당근마켓 당근페이 인프라 구축 이야기</h4>\n<p>핀테크 기업으로서 보안 등 제약이 있는 상황에서 클라우드 서비스를 이용해야 했음</p>\n<ol>\n<li>로그인서비스를 어떻게 구성했는가\n<ul>\n<li>계정 별로 환경 분리</li>\n<li>로그인 제한 -> 계정 별로 분리되어있지만 로그인은 대표계정에서 한다. cloudfnc와 동일하네\n<ul>\n<li>로그인은 security라는 계정이고 이 계정은 로그인만을 위해서 사용하고, 이렇게 로그인하면 dev, sta, prod 계정에 접속이 가능하게 된다. 외부 접근권한이 있는 security가 탈취되어도 dev에 접근 못하게 되면 아무것도 할 수 없다는 식</li>\n</ul>\n</li>\n<li>계정 탈취 시 여파 최소화</li>\n</ul>\n</li>\n<li>서버 접근을 어떻게 할 것인가\n<ul>\n<li>teleport - ssh 접속 후 행동을 영상으로 녹화해서 보여준다</li>\n</ul>\n</li>\n<li>애플리케이션 구성을 어떻게 할 것인가\n<ul>\n<li>kubernetes vs ec2</li>\n<li>쿠버네티스가 오버 엔지니어링이 아닐까 싶었지만\n같은 회사 다른 서비스에서 사용중이어서 조언을 얻을 수 있었고, 같은 팀의 팀원이 사용 경험이 있어서 충분히 도움을 받을 수 있는 환경이어서 사용하기로 했다</li>\n<li>alb -> istio 변환 예정</li>\n</ul>\n</li>\n<li>배포 파이프라인 구성을 어떻게 할 것인가\n<ul>\n<li>eks 에 맞는 도구를 찾으려고 했다</li>\n<li>툴에 대한 운영 경험이 있고 Github과 연계가 손쉽게 구성될 수 있는 기술 스택 선택</li>\n<li>Github Actions, Argocd, Argocd pipeline</li>\n<li>github 설치형을 n5.4xlarge 에 사용. 디스크 관리만 하면 무리없이 사용하기에 좋았음</li>\n</ul>\n</li>\n<li>관측 시스템을 어떻게 구성할 것인가\n<ul>\n<li>컨플라이언스 (보안) 문제로 SaaS 사용이 힘들었음 (Datadog, new relic 등)</li>\n<li>ElasticStack, Prometheus, Grafana 로 직접 구축</li>\n<li>FileBeat, Node Exporter 는 DaemonSet으로 올림</li>\n<li>Prometheus Operator를 이용해 Prometheus를 구성함</li>\n<li>AWS 리소스는 CloudWatch를 통해 모니터링\n<ul>\n<li>SNS -> AWS Chatbot을 통해 Slack 으로 발송. (이전에는 람다를 직접 구현했어야했음)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>성능 테스트를 어떻게 진행할 것인가\n<ul>\n<li>locust (kubernetes용인 klocust를 이용)</li>\n<li>테스트의 목적\n<ul>\n<li>최대 성능을 측정하는 형태는 목적이 불분명</li>\n<li>10분 동안의 테스트를 통해 99퍼센타일 응답 시간이 100 ms 이내일 때의 최대 TPS를 구하려고 함 -> 99%가 진행됐을 때의 응답 시간이 100ms ?</li>\n<li>파드 하나당 400TPS 라는 수치를 얻게 됨</li>\n</ul>\n</li>\n<li>테스트를 하면서 close_wait 소켓이 쌓이는 현상 발견. undertow를 netty로 변경</li>\n</ul>\n</li>\n</ol>\n<p><a href=\"https://www.youtube.com/watch?v=8a2-b9X7Xno\">https://www.youtube.com/watch?v=8a2-b9X7Xno</a></p>\n<h4 id=\"당근-채팅-시스템-아키텍처\" style=\"position:relative;\"><a href=\"#%EB%8B%B9%EA%B7%BC-%EC%B1%84%ED%8C%85-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98\" aria-label=\"당근 채팅 시스템 아키텍처 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>당근 채팅 시스템 아키텍처</h4>\n<p>큰 회사에서도 개발을 하는 인원은 적을 수 있고 최대한 매니지드 서비스를 이용하는 경향이 있다</p>\n<p>dynamodb를 쓰면서 에러는 거의 안나서 안정적이었다\n근데 쿼리를 잘 쓰기 어렵고 인덱스를 건 item만 가져올 수 있어서 인덱스를 잘 두어야하기 때문에 설계에 대해서 고민이 많이 필요함, Full scan은 안해야한다\n채팅방 하나를 partition하나 정의\nsort key\b는 message의 id로 설정</p>\n<p>redis cluster로 stateless하게 웹소켓용으로 썼고 좋아보임</p>\n<h4 id=\"람다를-이용한-아키텍처-모범-사례\" style=\"position:relative;\"><a href=\"#%EB%9E%8C%EB%8B%A4%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%AA%A8%EB%B2%94-%EC%82%AC%EB%A1%80\" aria-label=\"람다를 이용한 아키텍처 모범 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>람다를 이용한 아키텍처 모범 사례</h4>\n<blockquote>\n<p>서버 기반 아키텍처 모범 사례가 있습니다.(단일 장애 지점 제거, 배포 전 변경 사항 테스트, 중요한 데이터 암호화 등)</p>\n<ul>\n<li><a href=\"https://dc2348.tistory.com/6#:~:text=%EC%84%9C%EB%B2%84%20%EA%B8%B0%EB%B0%98%20%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98%20%EB%AA%A8%EB%B2%94%20%EC%82%AC%EB%25A%F0%9F%99%8B%E2%80%8D%E2%99%82%EF%B8%8F1%80%EA%B0%80%20%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4.(%EB%8B%A8%EC%9D%BC%20%EC%9E%A5%EC%95%A0%20%EC%A7%80%EC%A0%90%20%EC%A0%9C%EA%B1%B0%2C%20%EB%B0%B0%ED%8F%AC%20%EC%A0%84%20%EB%B3%80%EA%B2%BD%20%EC%82%AC%ED%95%AD%20%ED%85%8C%EC%8A%A4%ED%8A%B8%2C%20%EC%A4%91%EC%9A%94%ED%95%9C%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EC%95%94%ED%98%B8%ED%99%94%20%EB%93%B1)\">https://dc2348.tistory.com/6#:~:text=%EC%84%9C%EB%B2%84%20%EA%B8%B0%EB%B0%98%20%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98%20%EB%AA%A8%EB%B2%94%20%EC%82%AC%EB%A🙋‍♂️1%80%EA%B0%80%20%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4.(%EB%8B%A8%EC%9D%BC%20%EC%9E%A5%EC%95%A0%20%EC%A7%80%EC%A0%90%20%EC%A0%9C%EA%B1%B0%2C%20%EB%B0%B0%ED%8F%AC%20%EC%A0%84%20%EB%B3%80%EA%B2%BD%20%EC%82%AC%ED%95%AD%20%ED%85%8C%EC%8A%A4%ED%8A%B8%2C%20%EC%A4%91%EC%9A%94%ED%95%9C%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EC%95%94%ED%98%B8%ED%99%94%20%EB%93%B1)</a></li>\n</ul>\n</blockquote>\n<ul>\n<li>단순한 동작을 여러겹으로 겹치면 깔끔하고 보기도 좋지 않을까?</li>\n<li>유닉스의 파이프라인처럼 api를 파이프라이닝 해서 원하는 값을 만들어도 괜찮을까\n<ul>\n<li>함수형 프로그래밍을 이용해서 파이프라이닝 형태로 만들어주는 api를 만들어서 api로 api를 불러서 파이프라이닝 하는 것.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"시퀀스\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%ED%80%80%EC%8A%A4\" aria-label=\"시퀀스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시퀀스</h4>\n<p>어두운 도서관 입구에서 시작해서\n가장 중심인 곳은 가장 밝은 판테온 형태의 밝은 전시관이 있다</p>\n<p>[[2022-05-01#빨강 - 핑크 - 보라]]</p>\n<h4 id=\"패턴화\" style=\"position:relative;\"><a href=\"#%ED%8C%A8%ED%84%B4%ED%99%94\" aria-label=\"패턴화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>패턴화</h4>\n<p>가드레일을 만들되 자유도를 느낄 수 있도록</p>\n<ul>\n<li>젤다의전설</li>\n<li>오픈형월드게임</li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{"id":"인프라-레벨","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%9D%B8%ED%94%84%EB%9D%BC-%EB%A0%88%EB%B2%A8","ariaLabel":"인프라 레벨 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"인프라 레벨"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"최소한의-인프라","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%B5%9C%EC%86%8C%ED%95%9C%EC%9D%98-%EC%9D%B8%ED%94%84%EB%9D%BC","ariaLabel":"최소한의 인프라 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"최소한의 인프라"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"정적 페이지"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"CDN"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"S3 저장소"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"람다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"API Gateway"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"규모가-커짐에-따라-안정적인-운영을-위한-추가-인프라","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EA%B7%9C%EB%AA%A8%EA%B0%80-%EC%BB%A4%EC%A7%90%EC%97%90-%EB%94%B0%EB%9D%BC-%EC%95%88%EC%A0%95%EC%A0%81%EC%9D%B8-%EC%9A%B4%EC%98%81%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%B6%94%EA%B0%80-%EC%9D%B8%ED%94%84%EB%9D%BC","ariaLabel":"규모가 커짐에 따라 안정적인 운영을 위한 추가 인프라 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"규모가 커짐에 따라 안정적인 운영을 위한 추가 인프라"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"데이터베이스"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"캐시"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"오토스케일러"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"강력하게-탄탄한-인프라","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EA%B0%95%EB%A0%A5%ED%95%98%EA%B2%8C-%ED%83%84%ED%83%84%ED%95%9C-%EC%9D%B8%ED%94%84%EB%9D%BC","ariaLabel":"강력하게 탄탄한 인프라 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"강력하게 탄탄한 인프라"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"메시지 큐"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"about-cloud","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#about-cloud","ariaLabel":"about cloud permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"About Cloud"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"모든것을-위한-클라우드는-없다","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%AA%A8%EB%93%A0%EA%B2%83%EC%9D%84-%EC%9C%84%ED%95%9C-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%EB%8A%94-%EC%97%86%EB%8B%A4","ariaLabel":"모든것을 위한 클라우드는 없다 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"모든것을 위한 클라우드는 없다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"그럼 트리 구조로 선택 가능한가"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"회귀 가능한 요소는 어떤게 있을까"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"집약 세분화 집약 세분화"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"비용"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"사용자"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"시간"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"공간"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"정적페이지로-최대한-만들어서-cdn-이용하기","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%A0%95%EC%A0%81%ED%8E%98%EC%9D%B4%EC%A7%80%EB%A1%9C-%EC%B5%9C%EB%8C%80%ED%95%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%84%9C-cdn-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B8%B0","ariaLabel":"정적페이지로 최대한 만들어서 cdn 이용하기 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"정적페이지로 최대한 만들어서 cdn 이용하기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스테이트리스 한건 정적으로, 스테이트풀한건 서버를 사용해야 한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"클라우드는-편리하지만-내부를-통제할-수-없다","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%EB%8A%94-%ED%8E%B8%EB%A6%AC%ED%95%98%EC%A7%80%EB%A7%8C-%EB%82%B4%EB%B6%80%EB%A5%BC-%ED%86%B5%EC%A0%9C%ED%95%A0-%EC%88%98-%EC%97%86%EB%8B%A4","ariaLabel":"클라우드는 편리하지만 내부를 통제할 수 없다 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"클라우드는 편리하지만 내부를 통제할 수 없다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"클라우드에서는 시스템 자원 관리는 클라우드에 맡김으로써 하드웨어의 효율화에 대한 고민은 생략된다. (캐시와 CPU, DISK 간의 구성에 대해 신경을 못쓴다). 이 부분의 최적화는 생략하는 대신 내 서비스가 잘 실행되느냐에 집중할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"AWS, GCP, AZURE"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"server -> lambda -> dynamodb -> server"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"web, db, lambda, mq"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"cognito"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"cloud program micro service - use app engine"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"lambda <-> sns server <-> web server"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"ec2-인스턴스-리소스-요금-항목","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%9A%94%EA%B8%88-%ED%95%AD%EB%AA%A9","ariaLabel":"ec2 인스턴스 리소스 요금 항목 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"ec2 인스턴스 리소스 요금 항목"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"인스턴스 유지하는데 비용은 표시된만큼 나오는데 사용하다보면 그 외에 추가 요금이\n생긴다\npublic static ip\nbandwidth (per GB)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"aws-서버들-간-벤치마크","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#aws-%EC%84%9C%EB%B2%84%EB%93%A4-%EA%B0%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC","ariaLabel":"aws 서버들 간 벤치마크 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"aws 서버들 간 벤치마크"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://dev.to/yaorenjie/benchmarks-of-aws-ec2-5-4-3-series-1kpl"},"children":[{"type":"text","value":"https://dev.to/yaorenjie/benchmarks-of-aws-ec2-5-4-3-series-1kpl"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"C (cpu) / M (general) / R (memory) 시리즈가 있고, 3, 4, 5세대로 발전하고 있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"싱글코어에서는 시리즈별 차이는 거의 없다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"AMD 서버는 CPU는 20% 빠르지만 메모리는 25% 느렸다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"kubernetes-셋팅을-위한-cloud-hosting-자원-종류","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubernetes-%EC%85%8B%ED%8C%85%EC%9D%84-%EC%9C%84%ED%95%9C-cloud-hosting-%EC%9E%90%EC%9B%90-%EC%A2%85%EB%A5%98","ariaLabel":"kubernetes 셋팅을 위한 cloud hosting 자원 종류 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"kubernetes 셋팅을 위한 cloud hosting 자원 종류"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"control plane (aks, gke ...)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"compute instance (on demand, reserved, spot)\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"kubernetes cluster need at least 3.5GB of RAM"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"load balancer"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"disk storage"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"container registry"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://georgepaw.medium.com/how-to-run-the-cheapest-kubernetes-cluster-at-1-per-day-9287abb90cee"},"children":[{"type":"text","value":"https://georgepaw.medium.com/how-to-run-the-cheapest-kubernetes-cluster-at-1-per-day-9287abb90cee"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"nat-gateway-비용이-은근-많이-나올-수-있음","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#nat-gateway-%EB%B9%84%EC%9A%A9%EC%9D%B4-%EC%9D%80%EA%B7%BC-%EB%A7%8E%EC%9D%B4-%EB%82%98%EC%98%AC-%EC%88%98-%EC%9E%88%EC%9D%8C","ariaLabel":"nat gateway 비용이 은근 많이 나올 수 있음 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"NAT gateway 비용이 은근 많이 나올 수 있음"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"프라이빗망의 인스턴스가 퍼블릭에 접근해야 하는 경우 통신됨"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"S3에 업로드/다운로드가 많이 일어난다면 비용 폭탄\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"S3 전용 VPC Endpoint를 쓰면 무료라고 한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"S3와 DynamoDB는 Gateway 형식의 Endpoint. VPC당 20개 쓸 수 있음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"serverless","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#serverless","ariaLabel":"serverless permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Serverless"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"채팅서비스에서의 람다가 적합하지 않을 수도 있겠다\n처음엔 인스턴트성이 강해서 필요할때만 켜지는게 효율적이다 생각했는데\n콜드스타트 문제로 처음 응답이 느릴 수 있고\n그걸 해결하고자 계속 켜지게하면 사용시간이 늘면서 비용이 늘고 람다를 쓰는 의미가 없어질 수도 있다\nGPT도 동일하게 말해준다. 지속실행이 어렵고, 사용자가 많아지면 비용이 급증하고, 웹소켓 상태 관리가 어렵고 높은 지연시간이 있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Lambda는 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"요청당 비용"}]},{"type":"text","value":"이 발생하므로, 사용자마다 개별 Lambda가 떠 있으면 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"비용 부담이 큼"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그래서 fargate를 쓰는게 대안이고 redis pub/sub도 써서 메시지 브로드캐스팅용으로 쓰기를 제안한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"데이터베이스는"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"실시간 메시지 전송은 Elasticache"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"채팅 로그 단순 저장은 DynamoDB, (유저 정보도 여기 저장하지 못할 이유가 없다)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"채팅방/유저 데이터 관리는 RDS"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"람다를-기가-막히게-사용하고-싶다--큐와-함께","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%9E%8C%EB%8B%A4%EB%A5%BC-%EA%B8%B0%EA%B0%80-%EB%A7%89%ED%9E%88%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B3%A0-%EC%8B%B6%EB%8B%A4--%ED%81%90%EC%99%80-%ED%95%A8%EA%BB%98","ariaLabel":"람다를 기가 막히게 사용하고 싶다  큐와 함께 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"람다를 기가 막히게 사용하고 싶다 + 큐와 함께"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"왜 람다가 좋으냐"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"람다를 써도 될까 람다를 쓰면 안되는 경우"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"pLimit\n팬아웃\n큐와의 조합"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"콜드스타트는 여전히 느리고,\n어느순간 트래픽이 폭증하면서 온디멘드와 별반 차이가 없어졌고,\n오만 수단을 다 동원해도 배포가 너무 느림"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"서버리스를-선호","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%84%9C%EB%B2%84%EB%A6%AC%EC%8A%A4%EB%A5%BC-%EC%84%A0%ED%98%B8","ariaLabel":"서버리스를 선호 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"서버리스를 선호"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"아키텍처를 그릴 때 서버리스로 가능한지 먼저 확인한다\n서버리스로 할 수 없는 특징이 없다면 서버리스로 시도한다\n관리포인트가 줄어드는점\n모듈화가 되어서 다른 서비스 연결이 잘 되는점\n가벼운점\n작업의 실행을 보장할 수 있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"서버리스로 하기 어려운 특징이 어떤게 있냐면\n이번회사를 다니면서 백엔드 서버가 딱 있으니까 좋다고 느낀게 있었다\n쿼리로 데이터 관리할 수 있는 점 - 트랜잭션\n머신러닝처럼 컴퓨팅 성능이 중요한 경우\n실시간성이 중요한 서비스"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그래서 람다의 한계를 배우게 된다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"지속 연결이 필요하면 못 쓴다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"빠른 응답이 필요하면 못 쓴다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"fargate도 서버리스 컨테이너 서버이기 때문에 서버리스를 쓰는거긴 하다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"서버가 필요한 작업"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"데이터베이스에 접근"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"api 핸들링 (클라이언트에서 가능할듯)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"모니터링?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"람다의-약점","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%9E%8C%EB%8B%A4%EC%9D%98-%EC%95%BD%EC%A0%90","ariaLabel":"람다의 약점 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"람다의 약점"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"느린 시작"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"모노리스에 비해 통신의 비용이 든다(마이크로서비스라면 비슷)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"로컬 테스트와 배포된 람다 간에 연결성을 높여보도록 구성해봐야겠다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"serverless에 배포 전 로컬 테스트.\n배포 후 자동 테스트\n배포 후 에러 처리"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"서버리스-프레임워크-단점","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%84%9C%EB%B2%84%EB%A6%AC%EC%8A%A4-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EB%8B%A8%EC%A0%90","ariaLabel":"서버리스 프레임워크 단점 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"서버리스 프레임워크 단점"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"도큐먼트"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"어떤 입력값을 쓸 수 있는지 나와있는 문서가 없다\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"cloudformation 값을 참고 할 수 있음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"람다를-큰-규모로-사용할-때-뼈대를-잡아주는-프레임워크","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%9E%8C%EB%8B%A4%EB%A5%BC-%ED%81%B0-%EA%B7%9C%EB%AA%A8%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C-%EB%BC%88%EB%8C%80%EB%A5%BC-%EC%9E%A1%EC%95%84%EC%A3%BC%EB%8A%94-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC","ariaLabel":"람다를 큰 규모로 사용할 때 뼈대를 잡아주는 프레임워크 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"람다를 큰 규모로 사용할 때 뼈대를 잡아주는 프레임워크"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://middy.js.org/"},"children":[{"type":"text","value":"middy"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://docs.powertools.aws.dev/lambda/typescript/latest/"},"children":[{"type":"text","value":"aws powertools"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"aws","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#aws","ariaLabel":"aws permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"AWS"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"연결된 서비스 : serverless, cloud, gcp, azure, container"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"신규-업데이트-확인","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%8B%A0%EA%B7%9C-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%ED%99%95%EC%9D%B8","ariaLabel":"신규 업데이트 확인 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"신규 업데이트 확인"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"신규 업데이트 확인\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"aws blog"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"aws reinvent"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"네트워크","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC","ariaLabel":"네트워크 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"네트워크"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"[[Network]]"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"격리\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"vpc"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"외부 연결"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"컴퓨팅","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%BB%B4%ED%93%A8%ED%8C%85","ariaLabel":"컴퓨팅 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"컴퓨팅"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"서버"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"컨테이너"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"스토리지","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80","ariaLabel":"스토리지 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"스토리지"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"fully management service\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"rds"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"aurora"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"serverless"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"vpc","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#vpc","ariaLabel":"vpc permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"VPC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"외부 - VPC - AZ - subnet - instance - route table - igw (subnet을 퍼블릭으로 만들어주는 것과 같은 효과) - nat gateway (subnet이 private 상태로 인터넷 연결) - NACL (control ALLOW and DENY) - security group (control only ALLOW)\nVPC Flow Logs"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"네트워크 트래픽 정보를 캡쳐한 것을 볼 수 있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"VPC 안에서 개별로 설정"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"VPC Peering"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"VPC 끼리 통신할 수 있도록 해주는 것"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"VPC Endpoints"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"외부에 있는 S3에서 VPC Endpoint를 통해서 다른 VPC에 있는 프라이빗 인스턴스에 접근 가능"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ENI"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"실질적으로 인스턴스와 Security group, VPC 등이 연결되는 네트워크 인터페이스 장비라고 보면 될 듯"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"iam","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#iam","ariaLabel":"iam permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"IAM"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"IAM = Identity and Access Management, Global Service\nRoot account created by default\nUsers - people within your organization, can be grouped\nGroups only contain users, not other groups\nUsers don't have to belong to a group, and user can belong to multiple groups\naccount id에다가 alias를 달 수 있다 fnckop 처럼\nfnckop에 iam 유저로 로그인하면 account id를 같은 걸 쓴다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"IAM: Permissions\npolicies(정책) - contains effect, action, resource, (principal), (sid)\n정책은 최소 권한의 원칙으로 관리하는 걸 권장함. 유저가 딱 필요한 권한만 주는 것\n정책은 그룹에도 걸 수 있고, 유저에도 걸 수 있음\nprincipal은 account/user/role 중에 특정 대상에만 적용하게 하기 위한 조건"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"근데 그러면 정책 자체가 특정 대상에 걸리는건데 principal이 필요한가?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"리소스 기반 정책이 있고, 자격 증명 기반 정책이 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"principal은 리소스 기반 정책에 필요하고, 유저나 그룹에 거는건 자격 증명 기반 정책"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"iam-guidelines--best-practices","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#iam-guidelines--best-practices","ariaLabel":"iam guidelines  best practices permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"IAM Guidelines & Best Practices"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Don't use the root account except for AWS account setup\nOne physical user = One AWS user\nAssign users to groups and assign permissions to groups"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Shared Responsibility Model for IAM\nAWS가 책임지는 것"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인프라"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"설정과 취약점 분석"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"컴플라이언스 검증"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"유저가 책임져야 하는 것"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"유저, 롤, 정책 등에 대한 관리 및 모니터링"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"MFA를 사용하는 것"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"키를 자주 바꿔주는 것"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"적절한 권한을 설정하는 것"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"접근에 대한 분석, 권한 리뷰"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"storage","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#storage","ariaLabel":"storage permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Storage"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"glacier\n"},{"type":"element","tagName":"a","properties":{"href":"https://bluese05.tistory.com/35"},"children":[{"type":"text","value":"https://bluese05.tistory.com/35"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"데이터 가져오고 검색하는게 좀 한계가 있어서 활용도는 떨어지는 듯"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"메시지-큐","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%A9%94%EC%8B%9C%EC%A7%80-%ED%81%90","ariaLabel":"메시지 큐 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"메시지 큐"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"sqs에 실패처리용 큐를 하나 만들어서 거기에 담아서 에러를 확인한다.\n메시지큐에서 실패한 것들을 받으면 람다를 실행하게 해서 오류처리 할 수 있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"hands-on","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#hands-on","ariaLabel":"hands on permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Hands-on"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"aws-beanstalk-eip-없이-접속하기","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#aws-beanstalk-eip-%EC%97%86%EC%9D%B4-%EC%A0%91%EC%86%8D%ED%95%98%EA%B8%B0","ariaLabel":"aws beanstalk eip 없이 접속하기 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"aws beanstalk eip 없이 접속하기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"vpc 연결 안된다고 떴던 에러 해결하면 될 듯"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"내 vpc 와 비교"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"라우팅 테이블에 igw 가 있는지 없는지가 다르다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"여기에 igw 설정을 하지 않고도 사용할 수 있는 방법이 있을까?\n지금 만약에 바로 igw를 연결하면 default vpc가 외부와 연결되서 보안이 다 뚫릴 것 같다.\n근데 eb를 외부 igw 연결된 것만 생성 가능한 것도 이상하다.\nvpc endpoint 라는 것을 이용하면 된다고 하는 것 같다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/vpc-vpce.html"},"children":[{"type":"text","value":"https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/vpc-vpce.html"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"기본 요구사항은 vpc가 퍼블릭이면 igw가 연결되어 있어야 하고,\n프라이빗이면 NAT 디바이스를 이용하라고 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"app-private 에 NAT 가 연결되어 있어서 이걸로 테스트해보면 되겠다.\n로드밸런서와 인스턴스 둘 다 private으로? -> 된다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"nat를 쓴다는 것 자체가 하나의 EIP 를 쓴다는 것이긴 하다.\nNAT 없이 private으로 만들고 load balancer를 연결할 수 있을까?\nbeanstalk은 정말로 public에 대한 연결을 필수로 요구하는 것인가?\nvpc endpoint를 써보자"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"aws-자격증","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#aws-%EC%9E%90%EA%B2%A9%EC%A6%9D","ariaLabel":"aws 자격증 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"AWS 자격증"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"4종류 12개"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"프렉티셔널 (기초)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Associate (일반)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Pro"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Special (Pro와 같은 레벨)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Associate"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Developer"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Solutions Architect"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"SysOps Administrator\nPro"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"DevOps"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Solutions Architect\nSpecial"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Advanced Networking"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"예제 사이트\n"},{"type":"element","tagName":"a","properties":{"href":"https://www.examtopics.com/exams/amazon/aws-devops-engineer-professional/"},"children":[{"type":"text","value":"https://www.examtopics.com/exams/amazon/aws-devops-engineer-professional/"}]},{"type":"text","value":"\n덤프 문제 풀이\n"},{"type":"element","tagName":"a","properties":{"href":"https://blog.naver.com/PostView.naver?blogId=asd7005201&logNo=222606780619&parentCategoryNo=&categoryNo=23&viewDate=&isShowPopularPosts=true&from=search"},"children":[{"type":"text","value":"https://blog.naver.com/PostView.naver?blogId=asd7005201&logNo=222606780619&parentCategoryNo=&categoryNo=23&viewDate=&isShowPopularPosts=true&from=search"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"수험 가이드\n"},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/serithemage/df61aaf396046eff7244b6eaa8d58d4a"},"children":[{"type":"text","value":"https://gist.github.com/serithemage/df61aaf396046eff7244b6eaa8d58d4a"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://goddaehee.tistory.com/194"},"children":[{"type":"text","value":"https://goddaehee.tistory.com/194"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"aws-developer-associate","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#aws-developer-associate","ariaLabel":"aws developer associate permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"AWS Developer Associate"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.notion.so/aws-developer-associate-e91595fe733d494d99db3458e3535677"},"children":[{"type":"text","value":"https://www.notion.so/aws-developer-associate-e91595fe733d494d99db3458e3535677"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"덤프"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://dumps.kr/dumps/amazon-dva-c01/3"},"children":[{"type":"text","value":"https://dumps.kr/dumps/amazon-dva-c01/3"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/"},"children":[{"type":"text","value":"https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.knowledgehut.com/practice-tests/aws-certified-developer-associate-practice-test/Result/TWZCVHpBWktwK0JSS05pZkhvNVJxY2JDWkxFMzRPMmY="},"children":[{"type":"text","value":"https://www.knowledgehut.com/practice-tests/aws-certified-developer-associate-practice-test/Result/TWZCVHpBWktwK0JSS05pZkhvNVJxY2JDWkxFMzRPMmY="}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"saa","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#saa","ariaLabel":"saa permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"SAA"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.udemy.com/course/aws-certified-solutions-architect-associate-saa-c03/"},"children":[{"type":"text","value":"강의"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/serithemage/AWSCertifiedSolutionsArchitectUnofficialStudyGuide"},"children":[{"type":"text","value":"요약 2019 버전"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"덤프"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://dumps.kr/dumps/amazon-dva-c01"},"children":[{"type":"text","value":"https://dumps.kr/dumps/amazon-dva-c01"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/"},"children":[{"type":"text","value":"https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"범위\u001e"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"IAM"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"EC2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ELB, ASG"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"RDS + Aurora + Elasticache"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Route 53"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"S3"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"CloudFront, AWS Global Accelerator"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"AWS Storage Extras (snow family?, FSx?)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"SQS, SNS, Kinesis, Active MQ"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ECS, Fargate, ECR, EKS"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Lambda, Lambda@Edge, Dynamodb, API Gateway, Step Functions, Amazon Cognito"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Database (RDS, Aurora, ElastiCache, DynamoDB, S3, DocumentDB, Neptune, Keyspaces, OLDB, Timestream)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Data Analytics (Athena, Redshift, Opensearch, EMR, QuickSight, Glue, Lake Formation, Kinesis Data Analytics, MSK)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ML (Rekognition, Transcribe, Polly, Translate, Lex+Connect, Comprehend, Comprehend Medical, SageMaker, Forecast, Kendra, Personalize, Textract)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Monitoring (CloudWatch - Metrics, Logs, Agent, Logs Agent, Alarms, EventBridge, CloudTrail)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Security (KMS, SSM, Parameter Store, CloudHSM, Shield, WAF)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"VPC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"DR, Migration"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"EBS, EFS, FSx"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"EBS : 하나의 인스턴스에 연결해서 사용, 단일 AZ에 저장, 볼륨 단위 관리, EFS 보다 빠름, 다른 인스턴스로 이동은 가능"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"EFS : 자체적으로 사용 가능, 여러 AZ에 중복 저장, 파일 단위 관리, 자동 확장, NAS 쓰는 느낌"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"EC2 생성 시 EBS는 기본으로 연결되고 EFS, FSx는 따로 생성되어있으면 연결 가능하다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인스턴스 스토어라는 휘발성 저장소도 있는데 특정 인스턴스 유형으로만 시작할때만 연결할 수 있음"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"FSx : EFS 보다 고성능, 다양한 기능을 가진 서비스"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"다른 스토리지 서비스"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"DataSync : 온프레미스에 저장된 데이터를 AWS로 옮겨줌"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Snowball : 초대용량 데이터를 옮길 때 AWS에서 지원해줌"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Athena : S3에 저장되어 있는 로그를 쿼리할 수 있는 기능"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"test-전략","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#test-%EC%A0%84%EB%9E%B5","ariaLabel":"test 전략 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Test 전략"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"how-to-test","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#how-to-test","ariaLabel":"how to test permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"how to test"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"istio를 쓰면 플로우 모니터링 하긴 용이하다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"server-stress-test","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#server-stress-test","ariaLabel":"server stress test permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"server stress test"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"redis i/o test"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"go http server"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"kubernetes pod"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"simple http server stress test"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"find report"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"manual test\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"make test code\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"while"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"concurrent"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"curl\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ulimit -n"}]},{"type":"text","value":" -> 1024 (default) -> "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ulimit -n 10000"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"while true; do curl localhost; done"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"it depends on CPU, memory"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"temp","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#temp","ariaLabel":"temp permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"TEMP"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"iam 역할과 정책 비교"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"정책은 사용자, 역할, 그룹에 할당하는 실제 규칙"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"irsa"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"IAM Roles for Service Accounts"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"변경-파일만-검사하는-lint","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%B3%80%EA%B2%BD-%ED%8C%8C%EC%9D%BC%EB%A7%8C-%EA%B2%80%EC%82%AC%ED%95%98%EB%8A%94-lint","ariaLabel":"변경 파일만 검사하는 lint permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"변경 파일만 검사하는 lint"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"git diff\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"git diff $(git merge-base origin/${base} origin/${head})..origin/${head} --name-only --diff-filter=d | grep -E '.(js|jsx|ts|tsx)$'"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"git merge-base : base 브랜치와 타겟 브랜치의 공통 조상을 찾는다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"-name-only : 파일 이름만 출력한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"-diff-filter=d : 삭제된 파일은 제외한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"grep -E : 특정 확장자만 필터링"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"github actions에서 fetch 기본값은 최신 커밋 하나만 가져오는 건데 공통조상을 찾기 위해 전체 히스토리를 가져옴"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"인프라","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%9D%B8%ED%94%84%EB%9D%BC","ariaLabel":"인프라 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"인프라"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"subnet, route table\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"route table에 변경할 서브넷이 aws에는 만들어져있고, 이를 테라폼으로 안가져와서 이걸 가져와서 route table에 적용할지, 바로 그냥 스트링으로 입력할지?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"스테이징 서버 subnet 끼리 연결해줄 수 있도록 연결"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"terraform import 로 aws에서 땡겨올 수 있다.\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"terraform으로 이름만 만들어서 import 하고 내용 입력해서 plan해서 쓸 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"plan 해서 aws랑 sync하고 원하는 상태로 변경."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"각 폴더가 루트라서 data.terraform_remote_import 써서 output 만들어서 데이터 받아온다.\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"루트끼리 데이터 교환을 바로 못하나? 모듈에서는 됐던것 같은데"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"AZ존 a, c에 비해 b, d가 잘 안되는 이슈가 있다.\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"주로 a를 쓰고 c는 eks 하면서 조금씩 추가하고 있다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"eks subnet 자동으로 만들어진 것들\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"통신을 위한 포트가 랜덤으로 열려있음"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"nlb client는 0.0.0.0으로 열려있고 health는 특정 서브넷마다 할당 되있다. 왜그렇지?\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"임의 설정 가능한지 어노테이션 확인"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"NLB\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"웹소켓 등 다른 프로토콜 쓸 수 있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"빠르다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"바이패스로 지나가는 느낌이라 시큐리티 그룹으로 설정 못해준다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"테라폼\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"버전 업데이트에 따른 수정사항이 생기면 내가 바꾼 거랑 섞여서 보기 힘들다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인그레스 컨트롤러\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"class로 인그레스 어떤거 쓸지 선택, 디폴트 elb, nlb는 선택 필요"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"stable/nginx-ingress가 만료되서 새로 업데이트 해야한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"EKS 업데이트 시 인스턴스가 재생성 해야되서 elb에서 다시 수동으로 인스턴스를 잡아줘야하는 이슈가 있다\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"eks internal로 직접 만들어서 수동 설정하는게 있다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"kubectx 로 컨텍스트 설정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"운영에서는 에러 뜨면 바로 반응 오는게 맞다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"elb - nlb 일 필요 없다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ldap, saml #infra\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"aws login 등 할 때 마이크로소프트 saml 이용해서 중앙에서 권한 제어한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"browser에서\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"response-header에 content-security-policy로 컨텐츠 http 제한, https는 허용하는 식으로"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"새로운 k8s 리소스 생성하기\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"helm create 하고 운영서버 데이터 적당히 옮긴다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{"start":2},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"argocd 웹 들어가서 앱 생성"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"NLB -> ALB\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"주소 앞에 www를 붙이는 처리를 기존에는 apache 웹서버를 이용해서 했었는데, ALB에서 리다이렉트 처리가 가능해서 ALB를 사용하려 한다.\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"관리포인트가 줄어든다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"문제는 ALB의 IP 주소가 한번씩 바뀌어서 NLB가 ALB를 못바라본다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"그래서 람다를 이용해 NLB가 ALB를 찾을 수 있게 해주고 있다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"monorepo with yarn workspace\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"같은 프로젝트 안에 다른 서비스끼리 참조하면 임포트를 해줘야하나?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"캐시\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"캐시 전체 페이지 하고 있는데 비회원,회원 구분된 페이지에서 비회원화면이 캐시되있으면 회원이 접속해도 캐시된 화면 출력되는데 그래서 새로운 구분값이 추가되면 캐시페이지도 구분해줘야한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"장애 : 서비스가 의도한 대로 동작하지 않는 모든 것"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"장애감지 - telegram 으로 alert megazone과 구축"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"/var/log/mesages에 리눅스의 기본적인 로그가 남고 어떤 프로세스가 죽었는지 확인됨"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인프라 모니터링 + APM 으로 요청 검사"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"빈스톡의 nginx 기본 설정이 잘 막혀있도록 설정되어있음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"ec2-os-패치","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#ec2-os-%ED%8C%A8%EC%B9%98","ariaLabel":"ec2 os 패치 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"ec2 os 패치"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"devops, sta running 으로 검색"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인스턴스 백업\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이미지 및 템플릿 - 이미지 생성 = 스냅샷 생성"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이미지 이름은 인스턴스 이름 + BACKUP-날짜"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"운영에서는 재부팅 안 함을 활성화"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"AMI 에 생성됨, 볼륨 생성됨, 스냅샷 생성됨"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"시연은 JUMPSERVER를 이용해서 접속해서 했음\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"(근데 끊어져서 서버가 뻑난적이 있음. 접속이 끊어지면 안됨)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"os 확인 - centos"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"sudo yum update -x docker* (docker 관련 리소스는 업데이트 안함)\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"docker는 업데이트를 안했는데도 도커가 재시작 되는 경우가 있음"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"운영에서는 해당 인스턴스를 LB에서 빼주는게 안전"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"도커는 업데이트 해도 되는데 파라미터 수정해줘야 함"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"리눅스 재시작\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"sudo shutdown -r now"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"패치 확인\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"last reboot"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"version 이 다르게 표시된 걸로 확인"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"도커 컨테이너 확인해서 실행 안되어있으면 실행"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"/usr/lib/systemd/system/docker.service\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ExecStart=/usr/bin/dockerd 이 줄에 -H 옵션이 붙어있다면"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"뒤에 -H 붙이지 않는 걸로 수정해줘야 함"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"-H fd:// --containerd=/run/containerd/containerd.sock"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"수정파일 적용\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"sudo systemctl daemon-reload"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"EB Incorrect application version found on all instances. Expected version 에러"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인스턴스 1개면 EC2 리부팅 해주면 다시 됨"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"eks","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#eks","ariaLabel":"eks permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"eks"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"개발자 작업내역 로깅?\n개발자별 권한관리"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"awslogs get /aws/lambda/lambda-func-fnc-stg-an2-send-email-nhn ALL \\\n  --start='1h ago' --watch \\\n  --profile ums-dev --aws-region ap-northeast-2"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"점프서버","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%A0%90%ED%94%84%EC%84%9C%EB%B2%84","ariaLabel":"점프서버 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"점프서버"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"jumpserver 안쓰면 다른 ssh 툴로 접속해야 하나?\ndocker 업데이트 후 수정해야하는 것과 아닌 것의 차이는?\ndockerfile은 어디에 있을까?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"서버 접근 제어 솔루션"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"점프서버를 aws2020에 설치하여 사용"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"누가 언제 접속하고 어떤걸 했는지 로깅"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"동영상으로도 저장"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"시스템-버전-업데이트-어떻게-할-것인가","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%B2%84%EC%A0%84-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80","ariaLabel":"시스템 버전 업데이트 어떻게 할 것인가 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"시스템 버전 업데이트 어떻게 할 것인가"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"#infra\nec2, rds 업데이트\nstg-eks 는 terraform\nrds 는 aws console에서 수정 눌러서 업데이트"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"블루/그린 배포 추가된듯?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"mysql 5.6 -> 8로 업데이트 시 인스턴스 변경 필요한데 어떻게 하면 사이드이펙이 적을까"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"500에러\nALB에서 500 에러가 발생 가능하다\nELB는 가지고 있는 큐가 1024개 제한이 있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"rds-디비-접속","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#rds-%EB%94%94%EB%B9%84-%EC%A0%91%EC%86%8D","ariaLabel":"rds 디비 접속 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"RDS 디비 접속"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"#infra\n서브넷이 private용으로 돼있는데\nsecurity group 만 풀어주면 접속이 되나? 아니면 서브넷도 풀어줘야 하나?\n서브넷이 nat 만 열려있어서 그렇다. igw 연결 시켜줘야 했음.\n근데 db-public을 만드는 방향으로 가야함"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"iam-1","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#iam-1","ariaLabel":"iam 1 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"IAM"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"IAM 적용에는 시간이 걸린다 #infra"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"키네시스-로컬-테스트","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%ED%82%A4%EB%84%A4%EC%8B%9C%EC%8A%A4-%EB%A1%9C%EC%BB%AC-%ED%85%8C%EC%8A%A4%ED%8A%B8","ariaLabel":"키네시스 로컬 테스트 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"키네시스 로컬 테스트"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"docker-compose 실행"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"stream 생성"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"큐에 넣기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이터레이터 조회\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이터레이터로 레코드 조회"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"레코드 데이터 base64 디코딩"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이터레이터 유효기간 때문에 처음에만 조회가 된다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이터레이터를 새로 받으면 ~ 된다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이터레이터를 먼저 환경변수에 세팅하고, 값을 넣으면 그 이터레이터로 조회가능"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"로컬 키네시스 테스트"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이터레이터 하나 확인 (source get_records.sh 하면 환경변수에 저장 가능)\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"키네시스로 전송"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"레코드 확인 (레코드가 배열로 여러개 있음)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"base64 디코딩"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"json 형식으로 변환"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"stderr, stdout 일 때 처리를 다르게 해줘야 하나..\n#infra"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"cdn ->\ncache, cdn을 둬서 사용자가 많아져도 부하를 줄일 수 있다\n헤더를 한줄로 만들어서 람다로 분해해서 cdn에서 인식하게 한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"조작을 방지하기 위해"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"#infra"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"[[이벤트 드리븐]] #infra"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"쿠버네티스"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인그레스로 연결 접속 허용하는 사람 설정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인그레스 여러 개 사용하면서 적합한 것 사용"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"lb용으로 서브넷 따로 따져있음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스테이지는 스팟인스턴스 사용"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"디비는 메모리많은걸 써서 캐시 잘 되게 함. 조인할때도 그렇고 메모리에 적재할때 부족하면 느려져서 많으면 좋음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"eks_manage_user 로 하면 생성할때만 설정가능해서 role로 관리하는게 나을수도"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"proxy_protocol_v2 -> 클라이언트 ip 전달을 위해 헤더에 값 넣어주기 위한 설정 ("},{"type":"element","tagName":"a","properties":{"href":"https://purpleio.atlassian.net/wiki/spaces/PURPLEIO/pages/168067247/AWS+ELB+ALB+NLB+CLB+nginx+ingress+EC2"},"children":[{"type":"text","value":"https://purpleio.atlassian.net/wiki/spaces/PURPLEIO/pages/168067247/AWS+ELB+ALB+NLB+CLB+nginx+ingress+EC2"}]},{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"nlb 는 ppv2 지원"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"alb 는 x-forwarded-for 헤더에 기본 지원"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"nlb 에 annotation 설정 해주면 됨"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"configMap 에도 설정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"타겟 그룹에 preserve client ip address 값에 따라\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"sg에 클라이언트 ip 를 열어줘야 할 수 있음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"디비는 테라폼으로 같이 묶여있으면 지울때 날라가면 크리티컬"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"그냥 테라폼코드를 지우면 삭제하는 동작을 해서 따로 안보게 하는 설정을 해줘야 함"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"blue, green은 statefulset 으로 되있는데 다른건 뭘로 되어있는지? <-> deployment"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"deployment 대신 쓰는건데"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"service를 다른걸 쓴다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"파드가 죽다 살아나도 그 파드 그대로 사용된다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ec2에 설치된 오라클은 플러그인같은걸 쓰고 있었는데 RDS에서는 못써서, 근데 개선할 예정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"lb controller"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ELB, NLB 를 쿠버네티스가 관리할 수 있게 해주는 컨트롤러"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ingress controller가 예전버전인데 이걸 써야 nlb - ingress 연결이 된다?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html"},"children":[{"type":"text","value":"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"CLB에 비해 NLB 의 달라진 점은 어떤게 있지"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"버전을 variable로 다 빼도 될까?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"차트별로 버전 확인하려면 어떤 리소스인지 봐야되서 왔다갔다 하기 번거로울 수 있다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"locals랑 variables랑 뭐가 다르지"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"locals 는 상수"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"variables 는 terrafrom 명령어 칠 때 사용자가 변수 주입 가능"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"output 은 모듈 외부에서 값 받아쓸 때 사용 가능"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"2023으로 만든거에 helm으로 만든거는 eks 위에서 안뜨나?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"argo를 먼저 띄워놓고 그걸로 띄우나? <-> 모니터링 같은 시스템 쪽은 argo로 배포 안해도 될텐데"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"helm 자체가 eks 위에서 실행되긴 해야하는데"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://sineui.home.blog/2020/02/29/aws-eks-clb-alb%EB%A1%9C-%EC%9D%B4%EC%A0%84%ED%95%98%EA%B8%B0-1-%EB%B0%B0%EA%B2%BD/"},"children":[{"type":"text","value":"https://sineui.home.blog/2020/02/29/aws-eks-clb-alb%EB%A1%9C-%EC%9D%B4%EC%A0%84%ED%95%98%EA%B8%B0-1-%EB%B0%B0%EA%B2%BD/"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"argocd","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#argocd","ariaLabel":"argocd permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"argocd"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"처음 깔면 레포지토리 등록\ngitlab에서 repository > deploy token 에서 토큰 생성 후에 등록\nargocd에서 destination 추가"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"a 레코드로 하면 한번에 아이피를 찌르는데\ncname 을 거치면 한번 더 쳐야 되서 a 레코드가 낫다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"argocd에서 kubernetes namespace를 바꿀 때 ingress가 안지워지면 새로운 ingress가 안뜬다. 자동으로 안됨. service나 deployment도 안지워지고 새로운게 뜸"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{"className":["contains-task-list"]},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{"className":["task-list-item"]},"children":[{"type":"element","tagName":"input","properties":{"type":"checkbox","disabled":true},"children":[]},{"type":"text","value":" kubernetes toleration, taint\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"taint\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"노드에 설정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"팟이 할당 안되도록 하는 설정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이름을 명시적으로 설정. (ex: system, normal, large)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"tolerations와 함께 써서 특정 노드에만 뜨게 하기 위해 사용"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"tolerations\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"팟에 설정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"key, operator, value, effect 를 taint에 설정된 것과 같게 입력해주면"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"taint가 설정 되어 있어도 할당 되게 해줌"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"만약 해당 taint값이 없으면 생성이 실패되나?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"node selector와는 어떤 관계지"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"node affinity도 있음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"route 53 연결 해줬는데 인증서가 kolonmall 이 없는걸로 연결되서 400으로 에러남"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인증서 바꿔주면 시간 지나면 적용 됨. 캐시 남아있을 수 있음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ingress에 nodeSelector가 manage로 되어있던데 eks 만들때는 manage로 tag 걸어논게 없던데 이상없이 잘 떴음. manage는 기본으로 생성되는건가 아니면 이름 없으면 그냥 아무거나 붙는건가?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"kop-api 띄우다가 image 없다고 에러 뜸"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ecr에 lifecycle policy에 50개까지만 저장한다고 설정되어있음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"kop-web, kop-hybris beta 는 kop30-frontend 에서 ingress를 띄워서 연결해서 쓰고 있음"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"external dns를 helm으로 띄워서 팟이 인터벌 간격마다 확인하면서 dns 할당하는 역할을 함\n주소 매핑할때는 kubernetes 에 어노테이션 달아주면 되는데, ingress에 hosts 등록되어있어도 되는 거 같다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"keyv-cronjob"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"레디스에 쓸데없는 거 쌓인 거 지워주는 크론"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"무슨 라이브러리 쓰는게 있는데 그거때문에 데이터가 계속 쌓여서 메모리를 많이 차지해서 임시로 지워주게 처리함"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"그 라이브러리가 keyv 일 수 있음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"레디스 elasticache 버전이랑 클라이언트 버전 맞춰주기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"디비나 레디스같은 건 인바운드 열어줘야 할 수 있으니 확인"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"하이브리스도 레디스에 로그인 세션 저장해서 사용중"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"aws cni\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"container network interface"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"eks 가 아닌 기본 쿠버네티스를 띄울 때는 calico 등을 썼었는데 그것의 aws 버전"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"모니터링 테라폼 켤 때 aws cni 에서 ip 할당 안되는 에러 발생\n인스턴스 마다 할당 가능한 ip 제한이 있다 - 근데 xlarge 정도면 충분한듯\naws cni 설정 중에 minimum ip 관련 설정이 있다\naws cni 설정을 지우고 띄워보니 뜬다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{"className":["contains-task-list"]},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{"className":["task-list-item"]},"children":[{"type":"element","tagName":"input","properties":{"type":"checkbox","disabled":true},"children":[]},{"type":"text","value":" warm 어쩌고 설정이 어떤 건지 확인"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{"className":["task-list-item"]},"children":[{"type":"element","tagName":"input","properties":{"type":"checkbox","disabled":true},"children":[]},{"type":"text","value":" 해당 ip 설정 어떻게 하면 좋을지 확인"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"aws eks cni\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이 설정이 eks 설정 전체에 되는거라 minumum 설정 때문에 전체 ip가 부족했을 수 있을까?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"warm ip"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"warm prefix target\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이걸 4로 했을 때의 의미는?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이거 말고 다른 설정이 보통 안내되긴 하는데 잘 설정한거맞나?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ENABLE_PREFIX_DELEGATION 이 설정은 없어도 되나?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"minimum ip target\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"노드가 처음 나타날 때 최소 IP 할당 개수"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"l-ipamd"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"c6i.xlarge 58 - eni max pods"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"![[Pasted image 20231102182900.png]]\n"},{"type":"element","tagName":"a","properties":{"href":"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html"},"children":[{"type":"text","value":"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"eni 할당 모드에 secondary ip mode와 prefix 모드가 있다\n![[Pasted image 20231102170558.png]]\n"},{"type":"element","tagName":"a","properties":{"href":"https://www.eksworkshop.com/docs/networking/prefix/"},"children":[{"type":"text","value":"https://www.eksworkshop.com/docs/networking/prefix/"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"a","properties":{"href":"https://dobby-isfree.tistory.com/201"},"children":[{"type":"text","value":"https://dobby-isfree.tistory.com/201"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"secondary ip mode가 디폴트인데"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"prefix 모드가 새로 나왔고 aws에서 권장하는 옵션"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"prefix 모드로 하면 ip 할당에 api 호출이 필요없이 빠르게 된다고 한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://aws.amazon.com/ko/about-aws/whats-new/2022/12/amazon-s3-automatically-enable-block-public-access-disable-access-control-lists-buckets-april-2023/"},"children":[{"type":"text","value":"https://aws.amazon.com/ko/about-aws/whats-new/2022/12/amazon-s3-automatically-enable-block-public-access-disable-access-control-lists-buckets-april-2023/"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"s3 정책 수정되어서 최근 s3 버킷은 생성 시 ownership 유형 설정 추가 필요"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"loki 설치하니까 너무 팟이 많아서 인스턴스가 더 떠서 다 필요한 건지 확인\n레플리카 줄여서 띄움"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그라파나에서 로키 수동 등록"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그라파나 ldap 로그인 다 허용되서 제한 필요"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"인프라-레퍼런스","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%9D%B8%ED%94%84%EB%9D%BC-%EB%A0%88%ED%8D%BC%EB%9F%B0%EC%8A%A4","ariaLabel":"인프라 레퍼런스 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"인프라 레퍼런스"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"당근마켓-당근페이-인프라-구축-이야기","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%8B%B9%EA%B7%BC%EB%A7%88%EC%BC%93-%EB%8B%B9%EA%B7%BC%ED%8E%98%EC%9D%B4-%EC%9D%B8%ED%94%84%EB%9D%BC-%EA%B5%AC%EC%B6%95-%EC%9D%B4%EC%95%BC%EA%B8%B0","ariaLabel":"당근마켓 당근페이 인프라 구축 이야기 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"당근마켓 당근페이 인프라 구축 이야기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"핀테크 기업으로서 보안 등 제약이 있는 상황에서 클라우드 서비스를 이용해야 했음"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"로그인서비스를 어떻게 구성했는가\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"계정 별로 환경 분리"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"로그인 제한 -> 계정 별로 분리되어있지만 로그인은 대표계정에서 한다. cloudfnc와 동일하네\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"로그인은 security라는 계정이고 이 계정은 로그인만을 위해서 사용하고, 이렇게 로그인하면 dev, sta, prod 계정에 접속이 가능하게 된다. 외부 접근권한이 있는 security가 탈취되어도 dev에 접근 못하게 되면 아무것도 할 수 없다는 식"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"계정 탈취 시 여파 최소화"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"서버 접근을 어떻게 할 것인가\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"teleport - ssh 접속 후 행동을 영상으로 녹화해서 보여준다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"애플리케이션 구성을 어떻게 할 것인가\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"kubernetes vs ec2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"쿠버네티스가 오버 엔지니어링이 아닐까 싶었지만\n같은 회사 다른 서비스에서 사용중이어서 조언을 얻을 수 있었고, 같은 팀의 팀원이 사용 경험이 있어서 충분히 도움을 받을 수 있는 환경이어서 사용하기로 했다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"alb -> istio 변환 예정"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"배포 파이프라인 구성을 어떻게 할 것인가\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"eks 에 맞는 도구를 찾으려고 했다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"툴에 대한 운영 경험이 있고 Github과 연계가 손쉽게 구성될 수 있는 기술 스택 선택"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Github Actions, Argocd, Argocd pipeline"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"github 설치형을 n5.4xlarge 에 사용. 디스크 관리만 하면 무리없이 사용하기에 좋았음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"관측 시스템을 어떻게 구성할 것인가\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"컨플라이언스 (보안) 문제로 SaaS 사용이 힘들었음 (Datadog, new relic 등)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ElasticStack, Prometheus, Grafana 로 직접 구축"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"FileBeat, Node Exporter 는 DaemonSet으로 올림"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Prometheus Operator를 이용해 Prometheus를 구성함"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"AWS 리소스는 CloudWatch를 통해 모니터링\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"SNS -> AWS Chatbot을 통해 Slack 으로 발송. (이전에는 람다를 직접 구현했어야했음)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"성능 테스트를 어떻게 진행할 것인가\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"locust (kubernetes용인 klocust를 이용)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"테스트의 목적\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"최대 성능을 측정하는 형태는 목적이 불분명"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"10분 동안의 테스트를 통해 99퍼센타일 응답 시간이 100 ms 이내일 때의 최대 TPS를 구하려고 함 -> 99%가 진행됐을 때의 응답 시간이 100ms ?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"파드 하나당 400TPS 라는 수치를 얻게 됨"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"테스트를 하면서 close_wait 소켓이 쌓이는 현상 발견. undertow를 netty로 변경"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.youtube.com/watch?v=8a2-b9X7Xno"},"children":[{"type":"text","value":"https://www.youtube.com/watch?v=8a2-b9X7Xno"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"당근-채팅-시스템-아키텍처","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%8B%B9%EA%B7%BC-%EC%B1%84%ED%8C%85-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98","ariaLabel":"당근 채팅 시스템 아키텍처 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"당근 채팅 시스템 아키텍처"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"큰 회사에서도 개발을 하는 인원은 적을 수 있고 최대한 매니지드 서비스를 이용하는 경향이 있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"dynamodb를 쓰면서 에러는 거의 안나서 안정적이었다\n근데 쿼리를 잘 쓰기 어렵고 인덱스를 건 item만 가져올 수 있어서 인덱스를 잘 두어야하기 때문에 설계에 대해서 고민이 많이 필요함, Full scan은 안해야한다\n채팅방 하나를 partition하나 정의\nsort key\b는 message의 id로 설정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"redis cluster로 stateless하게 웹소켓용으로 썼고 좋아보임"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"람다를-이용한-아키텍처-모범-사례","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%9E%8C%EB%8B%A4%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%AA%A8%EB%B2%94-%EC%82%AC%EB%A1%80","ariaLabel":"람다를 이용한 아키텍처 모범 사례 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"람다를 이용한 아키텍처 모범 사례"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"서버 기반 아키텍처 모범 사례가 있습니다.(단일 장애 지점 제거, 배포 전 변경 사항 테스트, 중요한 데이터 암호화 등)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://dc2348.tistory.com/6#:~:text=%EC%84%9C%EB%B2%84%20%EA%B8%B0%EB%B0%98%20%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98%20%EB%AA%A8%EB%B2%94%20%EC%82%AC%EB%25A%F0%9F%99%8B%E2%80%8D%E2%99%82%EF%B8%8F1%80%EA%B0%80%20%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4.(%EB%8B%A8%EC%9D%BC%20%EC%9E%A5%EC%95%A0%20%EC%A7%80%EC%A0%90%20%EC%A0%9C%EA%B1%B0%2C%20%EB%B0%B0%ED%8F%AC%20%EC%A0%84%20%EB%B3%80%EA%B2%BD%20%EC%82%AC%ED%95%AD%20%ED%85%8C%EC%8A%A4%ED%8A%B8%2C%20%EC%A4%91%EC%9A%94%ED%95%9C%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EC%95%94%ED%98%B8%ED%99%94%20%EB%93%B1)"},"children":[{"type":"text","value":"https://dc2348.tistory.com/6#:~:text=%EC%84%9C%EB%B2%84%20%EA%B8%B0%EB%B0%98%20%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98%20%EB%AA%A8%EB%B2%94%20%EC%82%AC%EB%A🙋‍♂️1%80%EA%B0%80%20%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4.(%EB%8B%A8%EC%9D%BC%20%EC%9E%A5%EC%95%A0%20%EC%A7%80%EC%A0%90%20%EC%A0%9C%EA%B1%B0%2C%20%EB%B0%B0%ED%8F%AC%20%EC%A0%84%20%EB%B3%80%EA%B2%BD%20%EC%82%AC%ED%95%AD%20%ED%85%8C%EC%8A%A4%ED%8A%B8%2C%20%EC%A4%91%EC%9A%94%ED%95%9C%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EC%95%94%ED%98%B8%ED%99%94%20%EB%93%B1)"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"단순한 동작을 여러겹으로 겹치면 깔끔하고 보기도 좋지 않을까?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"유닉스의 파이프라인처럼 api를 파이프라이닝 해서 원하는 값을 만들어도 괜찮을까\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"함수형 프로그래밍을 이용해서 파이프라이닝 형태로 만들어주는 api를 만들어서 api로 api를 불러서 파이프라이닝 하는 것."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"시퀀스","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%8B%9C%ED%80%80%EC%8A%A4","ariaLabel":"시퀀스 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"시퀀스"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"어두운 도서관 입구에서 시작해서\n가장 중심인 곳은 가장 밝은 판테온 형태의 밝은 전시관이 있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"[[2022-05-01#빨강 - 핑크 - 보라]]"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"패턴화","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%ED%8C%A8%ED%84%B4%ED%99%94","ariaLabel":"패턴화 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"패턴화"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"가드레일을 만들되 자유도를 느낄 수 있도록"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"젤다의전설"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"오픈형월드게임"}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"rawMarkdownBody":"## 인프라 레벨\n\n#### 최소한의 인프라\n- 정적 페이지\n- CDN\n- S3 저장소\n- 람다\n- API Gateway\n\n#### 규모가 커짐에 따라 안정적인 운영을 위한 추가 인프라\n- 데이터베이스\n- 캐시\n- 오토스케일러\n\n#### 강력하게 탄탄한 인프라\n- 메시지 큐\n\n\n## About Cloud\n#### 모든것을 위한 클라우드는 없다\n- 그럼 트리 구조로 선택 가능한가\n- 회귀 가능한 요소는 어떤게 있을까\n- 집약 세분화 집약 세분화\n- 비용\n- 사용자\n- 시간\n- 공간\n\n#### 정적페이지로 최대한 만들어서 cdn 이용하기\n스테이트리스 한건 정적으로, 스테이트풀한건 서버를 사용해야 한다\n\n#### 클라우드는 편리하지만 내부를 통제할 수 없다\n\n클라우드에서는 시스템 자원 관리는 클라우드에 맡김으로써 하드웨어의 효율화에 대한 고민은 생략된다. (캐시와 CPU, DISK 간의 구성에 대해 신경을 못쓴다). 이 부분의 최적화는 생략하는 대신 내 서비스가 잘 실행되느냐에 집중할 수 있다.\n\n- AWS, GCP, AZURE\n- server -> lambda -> dynamodb -> server\n- web, db, lambda, mq\n- cognito\n- cloud program micro service - use app engine\n- lambda <-> sns server <-> web server\n\n#### ec2 인스턴스 리소스 요금 항목\n\n인스턴스 유지하는데 비용은 표시된만큼 나오는데 사용하다보면 그 외에 추가 요금이\n생긴다\npublic static ip\nbandwidth (per GB)\n\n#### aws 서버들 간 벤치마크\n\n- https://dev.to/yaorenjie/benchmarks-of-aws-ec2-5-4-3-series-1kpl\n- C (cpu) / M (general) / R (memory) 시리즈가 있고, 3, 4, 5세대로 발전하고 있다\n- 싱글코어에서는 시리즈별 차이는 거의 없다\n- AMD 서버는 CPU는 20% 빠르지만 메모리는 25% 느렸다\n\n#### kubernetes 셋팅을 위한 cloud hosting 자원 종류\n\n- control plane (aks, gke ...)\n- compute instance (on demand, reserved, spot)\n  - kubernetes cluster need at least 3.5GB of RAM\n- load balancer\n- disk storage\n- container registry\n- https://georgepaw.medium.com/how-to-run-the-cheapest-kubernetes-cluster-at-1-per-day-9287abb90cee\n\n\n#### NAT gateway 비용이 은근 많이 나올 수 있음\n- 프라이빗망의 인스턴스가 퍼블릭에 접근해야 하는 경우 통신됨\n- S3에 업로드/다운로드가 많이 일어난다면 비용 폭탄\n\t- S3 전용 VPC Endpoint를 쓰면 무료라고 한다\n\t- S3와 DynamoDB는 Gateway 형식의 Endpoint. VPC당 20개 쓸 수 있음\n\n## Serverless\n\n채팅서비스에서의 람다가 적합하지 않을 수도 있겠다\n처음엔 인스턴트성이 강해서 필요할때만 켜지는게 효율적이다 생각했는데\n콜드스타트 문제로 처음 응답이 느릴 수 있고\n그걸 해결하고자 계속 켜지게하면 사용시간이 늘면서 비용이 늘고 람다를 쓰는 의미가 없어질 수도 있다\nGPT도 동일하게 말해준다. 지속실행이 어렵고, 사용자가 많아지면 비용이 급증하고, 웹소켓 상태 관리가 어렵고 높은 지연시간이 있다\n- Lambda는 **요청당 비용**이 발생하므로, 사용자마다 개별 Lambda가 떠 있으면 **비용 부담이 큼**\n\n그래서 fargate를 쓰는게 대안이고 redis pub/sub도 써서 메시지 브로드캐스팅용으로 쓰기를 제안한다\n\n데이터베이스는 \n- 실시간 메시지 전송은 Elasticache\n- 채팅 로그 단순 저장은 DynamoDB, (유저 정보도 여기 저장하지 못할 이유가 없다)\n- 채팅방/유저 데이터 관리는 RDS\n\n#### 람다를 기가 막히게 사용하고 싶다 + 큐와 함께\n\n왜 람다가 좋으냐\n\n람다를 써도 될까 람다를 쓰면 안되는 경우\n\npLimit\n팬아웃\n큐와의 조합\n\n콜드스타트는 여전히 느리고,\n어느순간 트래픽이 폭증하면서 온디멘드와 별반 차이가 없어졌고,\n오만 수단을 다 동원해도 배포가 너무 느림\n\n#### 서버리스를 선호\n아키텍처를 그릴 때 서버리스로 가능한지 먼저 확인한다\n서버리스로 할 수 없는 특징이 없다면 서버리스로 시도한다\n관리포인트가 줄어드는점\n모듈화가 되어서 다른 서비스 연결이 잘 되는점\n가벼운점\n작업의 실행을 보장할 수 있다\n\n서버리스로 하기 어려운 특징이 어떤게 있냐면\n이번회사를 다니면서 백엔드 서버가 딱 있으니까 좋다고 느낀게 있었다\n쿼리로 데이터 관리할 수 있는 점 - 트랜잭션\n머신러닝처럼 컴퓨팅 성능이 중요한 경우\n실시간성이 중요한 서비스\n\n그래서 람다의 한계를 배우게 된다\n- 지속 연결이 필요하면 못 쓴다\n- 빠른 응답이 필요하면 못 쓴다\n\nfargate도 서버리스 컨테이너 서버이기 때문에 서버리스를 쓰는거긴 하다\n\n서버가 필요한 작업\n- 데이터베이스에 접근\n- api 핸들링 (클라이언트에서 가능할듯)\n- 모니터링?\n\n#### 람다의 약점\n- 느린 시작\n- 모노리스에 비해 통신의 비용이 든다(마이크로서비스라면 비슷)\n\n로컬 테스트와 배포된 람다 간에 연결성을 높여보도록 구성해봐야겠다\n\nserverless에 배포 전 로컬 테스트.\n배포 후 자동 테스트\n배포 후 에러 처리\n\n#### 서버리스 프레임워크 단점\n- 도큐먼트\n- 어떤 입력값을 쓸 수 있는지 나와있는 문서가 없다\n\t- cloudformation 값을 참고 할 수 있음\n\n#### 람다를 큰 규모로 사용할 때 뼈대를 잡아주는 프레임워크\n- [middy](https://middy.js.org/)\n- [aws powertools](https://docs.powertools.aws.dev/lambda/typescript/latest/)\n\n\n## AWS\n\n연결된 서비스 : serverless, cloud, gcp, azure, container\n\n### 신규 업데이트 확인\n\n- 신규 업데이트 확인\n  - aws blog\n  - aws reinvent\n\n### 네트워크\n\n- [[Network]]\n- 격리\n\t- vpc\n- 외부 연결\n\n### 컴퓨팅\n\n- 서버\n- 컨테이너\n\n### 스토리지\n\n- fully management service\n\t- rds\n\t- aurora\n- serverless\n\n## VPC\n\n외부 - VPC - AZ - subnet - instance - route table - igw (subnet을 퍼블릭으로 만들어주는 것과 같은 효과) - nat gateway (subnet이 private 상태로 인터넷 연결) - NACL (control ALLOW and DENY) - security group (control only ALLOW)\nVPC Flow Logs\n\n- 네트워크 트래픽 정보를 캡쳐한 것을 볼 수 있다\n- VPC 안에서 개별로 설정\n\nVPC Peering\n\n- VPC 끼리 통신할 수 있도록 해주는 것\n\nVPC Endpoints\n\n- 외부에 있는 S3에서 VPC Endpoint를 통해서 다른 VPC에 있는 프라이빗 인스턴스에 접근 가능\n\nENI\n\n- 실질적으로 인스턴스와 Security group, VPC 등이 연결되는 네트워크 인터페이스 장비라고 보면 될 듯\n\n## IAM\n\nIAM = Identity and Access Management, Global Service\nRoot account created by default\nUsers - people within your organization, can be grouped\nGroups only contain users, not other groups\nUsers don't have to belong to a group, and user can belong to multiple groups\naccount id에다가 alias를 달 수 있다 fnckop 처럼\nfnckop에 iam 유저로 로그인하면 account id를 같은 걸 쓴다\n\nIAM: Permissions\npolicies(정책) - contains effect, action, resource, (principal), (sid)\n정책은 최소 권한의 원칙으로 관리하는 걸 권장함. 유저가 딱 필요한 권한만 주는 것\n정책은 그룹에도 걸 수 있고, 유저에도 걸 수 있음\nprincipal은 account/user/role 중에 특정 대상에만 적용하게 하기 위한 조건\n\n- 근데 그러면 정책 자체가 특정 대상에 걸리는건데 principal이 필요한가?\n- 리소스 기반 정책이 있고, 자격 증명 기반 정책이 있다.\n- principal은 리소스 기반 정책에 필요하고, 유저나 그룹에 거는건 자격 증명 기반 정책\n\n#### IAM Guidelines & Best Practices\n\nDon't use the root account except for AWS account setup\nOne physical user = One AWS user\nAssign users to groups and assign permissions to groups\n\nShared Responsibility Model for IAM\nAWS가 책임지는 것\n\n- 인프라\n- 설정과 취약점 분석\n- 컴플라이언스 검증\n\n유저가 책임져야 하는 것\n\n- 유저, 롤, 정책 등에 대한 관리 및 모니터링\n- MFA를 사용하는 것\n- 키를 자주 바꿔주는 것\n- 적절한 권한을 설정하는 것\n- 접근에 대한 분석, 권한 리뷰\n\n## Storage\n\nglacier\nhttps://bluese05.tistory.com/35\n- 데이터 가져오고 검색하는게 좀 한계가 있어서 활용도는 떨어지는 듯\n\n#### 메시지 큐\n\nsqs에 실패처리용 큐를 하나 만들어서 거기에 담아서 에러를 확인한다.\n메시지큐에서 실패한 것들을 받으면 람다를 실행하게 해서 오류처리 할 수 있다\n\n\n## Hands-on\n#### aws beanstalk eip 없이 접속하기\n- vpc 연결 안된다고 떴던 에러 해결하면 될 듯\n- 내 vpc 와 비교\n- 라우팅 테이블에 igw 가 있는지 없는지가 다르다\n\n여기에 igw 설정을 하지 않고도 사용할 수 있는 방법이 있을까?\n지금 만약에 바로 igw를 연결하면 default vpc가 외부와 연결되서 보안이 다 뚫릴 것 같다.\n근데 eb를 외부 igw 연결된 것만 생성 가능한 것도 이상하다.\nvpc endpoint 라는 것을 이용하면 된다고 하는 것 같다\n\nhttps://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/vpc-vpce.html\n\n기본 요구사항은 vpc가 퍼블릭이면 igw가 연결되어 있어야 하고,\n프라이빗이면 NAT 디바이스를 이용하라고 한다.\n\napp-private 에 NAT 가 연결되어 있어서 이걸로 테스트해보면 되겠다.\n로드밸런서와 인스턴스 둘 다 private으로? -> 된다\n\nnat를 쓴다는 것 자체가 하나의 EIP 를 쓴다는 것이긴 하다.\nNAT 없이 private으로 만들고 load balancer를 연결할 수 있을까?\nbeanstalk은 정말로 public에 대한 연결을 필수로 요구하는 것인가?\nvpc endpoint를 써보자\n\n## AWS 자격증\n\n4종류 12개\n\n1. 프렉티셔널 (기초)\n2. Associate (일반)\n3. Pro\n4. Special (Pro와 같은 레벨)\n\nAssociate\n\n- Developer\n- Solutions Architect\n- SysOps Administrator\n  Pro\n- DevOps\n- Solutions Architect\n  Special\n- Advanced Networking\n\n예제 사이트\nhttps://www.examtopics.com/exams/amazon/aws-devops-engineer-professional/\n덤프 문제 풀이\nhttps://blog.naver.com/PostView.naver?blogId=asd7005201&logNo=222606780619&parentCategoryNo=&categoryNo=23&viewDate=&isShowPopularPosts=true&from=search\n\n수험 가이드\nhttps://gist.github.com/serithemage/df61aaf396046eff7244b6eaa8d58d4a\n\nhttps://goddaehee.tistory.com/194\n\n#### AWS Developer Associate\n\nhttps://www.notion.so/aws-developer-associate-e91595fe733d494d99db3458e3535677\n\n덤프\n\n- https://dumps.kr/dumps/amazon-dva-c01/3\n- https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/\n- https://www.knowledgehut.com/practice-tests/aws-certified-developer-associate-practice-test/Result/TWZCVHpBWktwK0JSS05pZkhvNVJxY2JDWkxFMzRPMmY=\n\n#### SAA\n- [강의](https://www.udemy.com/course/aws-certified-solutions-architect-associate-saa-c03/)\n- [요약 2019 버전](https://github.com/serithemage/AWSCertifiedSolutionsArchitectUnofficialStudyGuide)\n\n덤프\n- https://dumps.kr/dumps/amazon-dva-c01\n- https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/\n\n범위\u001e\n- IAM\n- EC2\n- ELB, ASG\n- RDS + Aurora + Elasticache\n- Route 53\n- S3\n- CloudFront, AWS Global Accelerator\n- AWS Storage Extras (snow family?, FSx?)\n- SQS, SNS, Kinesis, Active MQ\n- ECS, Fargate, ECR, EKS\n- Lambda, Lambda@Edge, Dynamodb, API Gateway, Step Functions, Amazon Cognito\n- Database (RDS, Aurora, ElastiCache, DynamoDB, S3, DocumentDB, Neptune, Keyspaces, OLDB, Timestream)\n- Data Analytics (Athena, Redshift, Opensearch, EMR, QuickSight, Glue, Lake Formation, Kinesis Data Analytics, MSK)\n- ML (Rekognition, Transcribe, Polly, Translate, Lex+Connect, Comprehend, Comprehend Medical, SageMaker, Forecast, Kendra, Personalize, Textract)\n- Monitoring (CloudWatch - Metrics, Logs, Agent, Logs Agent, Alarms, EventBridge, CloudTrail)\n- Security (KMS, SSM, Parameter Store, CloudHSM, Shield, WAF)\n- VPC\n- DR, Migration\n\nEBS, EFS, FSx\n- EBS : 하나의 인스턴스에 연결해서 사용, 단일 AZ에 저장, 볼륨 단위 관리, EFS 보다 빠름, 다른 인스턴스로 이동은 가능\n- EFS : 자체적으로 사용 가능, 여러 AZ에 중복 저장, 파일 단위 관리, 자동 확장, NAS 쓰는 느낌\n- EC2 생성 시 EBS는 기본으로 연결되고 EFS, FSx는 따로 생성되어있으면 연결 가능하다\n- 인스턴스 스토어라는 휘발성 저장소도 있는데 특정 인스턴스 유형으로만 시작할때만 연결할 수 있음\n- FSx : EFS 보다 고성능, 다양한 기능을 가진 서비스\n\n다른 스토리지 서비스\n- DataSync : 온프레미스에 저장된 데이터를 AWS로 옮겨줌\n- Snowball : 초대용량 데이터를 옮길 때 AWS에서 지원해줌\n\nAthena : S3에 저장되어 있는 로그를 쿼리할 수 있는 기능\n\n\n---\n## Test 전략\n\n#### how to test\n\nistio를 쓰면 플로우 모니터링 하긴 용이하다\n\n#### server stress test\n- redis i/o test\n- go http server\n- kubernetes pod\n- simple http server stress test\n\n1. find report\n2. manual test\n   - make test code\n     - while\n     - concurrent\n   - curl\n     - `ulimit -n` -> 1024 (default) -> `ulimit -n 10000`\n     - `while true; do curl localhost; done`\n\n- it depends on CPU, memory\n\n## TEMP\n\n\niam 역할과 정책 비교\n- 정책은 사용자, 역할, 그룹에 할당하는 실제 규칙\nirsa\n- IAM Roles for Service Accounts\n\n\n#### 변경 파일만 검사하는 lint\n- git diff\n\t- `git diff $(git merge-base origin/${base} origin/${head})..origin/${head} --name-only --diff-filter=d | grep -E '.(js|jsx|ts|tsx)$'`\n\t- git merge-base : base 브랜치와 타겟 브랜치의 공통 조상을 찾는다\n\t- -name-only : 파일 이름만 출력한다.\n\t- -diff-filter=d : 삭제된 파일은 제외한다\n\t- grep -E : 특정 확장자만 필터링\n- github actions에서 fetch 기본값은 최신 커밋 하나만 가져오는 건데 공통조상을 찾기 위해 전체 히스토리를 가져옴\n\n\n#### 인프라\n* subnet, route table\n\t* route table에 변경할 서브넷이 aws에는 만들어져있고, 이를 테라폼으로 안가져와서 이걸 가져와서 route table에 적용할지, 바로 그냥 스트링으로 입력할지?\n* 스테이징 서버 subnet 끼리 연결해줄 수 있도록 연결\n* terraform import 로 aws에서 땡겨올 수 있다.\n\t* terraform으로 이름만 만들어서 import 하고 내용 입력해서 plan해서 쓸 수 있다.\n\t* plan 해서 aws랑 sync하고 원하는 상태로 변경.\n\t* 각 폴더가 루트라서 data.terraform_remote_import 써서 output 만들어서 데이터 받아온다.\n\t\t* 루트끼리 데이터 교환을 바로 못하나? 모듈에서는 됐던것 같은데\n* AZ존 a, c에 비해 b, d가 잘 안되는 이슈가 있다.\n\t* 주로 a를 쓰고 c는 eks 하면서 조금씩 추가하고 있다.\n* eks subnet 자동으로 만들어진 것들\n\t* 통신을 위한 포트가 랜덤으로 열려있음\n\t* nlb client는 0.0.0.0으로 열려있고 health는 특정 서브넷마다 할당 되있다. 왜그렇지?\n\t\t* 임의 설정 가능한지 어노테이션 확인\n* NLB\n\t* 웹소켓 등 다른 프로토콜 쓸 수 있다\n\t* 빠르다\n\t* 바이패스로 지나가는 느낌이라 시큐리티 그룹으로 설정 못해준다\n* 테라폼\n\t* 버전 업데이트에 따른 수정사항이 생기면 내가 바꾼 거랑 섞여서 보기 힘들다\n* 인그레스 컨트롤러\n\t* class로 인그레스 어떤거 쓸지 선택, 디폴트 elb, nlb는 선택 필요\n\t* stable/nginx-ingress가 만료되서 새로 업데이트 해야한다\n\t* EKS 업데이트 시 인스턴스가 재생성 해야되서 elb에서 다시 수동으로 인스턴스를 잡아줘야하는 이슈가 있다\n\t\t* eks internal로 직접 만들어서 수동 설정하는게 있다\n* kubectx 로 컨텍스트 설정\n* 운영에서는 에러 뜨면 바로 반응 오는게 맞다\n* elb - nlb 일 필요 없다\n* ldap, saml #infra\n\t* aws login 등 할 때 마이크로소프트 saml 이용해서 중앙에서 권한 제어한다.\n* browser에서\n\t* response-header에 content-security-policy로 컨텐츠 http 제한, https는 허용하는 식으로\n* 새로운 k8s 리소스 생성하기\n\t* 1. helm create 하고 운영서버 데이터 적당히 옮긴다\n\t* 2. argocd 웹 들어가서 앱 생성\n* NLB -> ALB\n\t* 주소 앞에 www를 붙이는 처리를 기존에는 apache 웹서버를 이용해서 했었는데, ALB에서 리다이렉트 처리가 가능해서 ALB를 사용하려 한다.\n\t\t* 관리포인트가 줄어든다\n\t* 문제는 ALB의 IP 주소가 한번씩 바뀌어서 NLB가 ALB를 못바라본다.\n\t* 그래서 람다를 이용해 NLB가 ALB를 찾을 수 있게 해주고 있다.\n* monorepo with yarn workspace\n\t* 같은 프로젝트 안에 다른 서비스끼리 참조하면 임포트를 해줘야하나?\n- 캐시\n\t- 캐시 전체 페이지 하고 있는데 비회원,회원 구분된 페이지에서 비회원화면이 캐시되있으면 회원이 접속해도 캐시된 화면 출력되는데 그래서 새로운 구분값이 추가되면 캐시페이지도 구분해줘야한다.\n- 장애 : 서비스가 의도한 대로 동작하지 않는 모든 것\n- 장애감지 - telegram 으로 alert megazone과 구축\n- /var/log/mesages에 리눅스의 기본적인 로그가 남고 어떤 프로세스가 죽었는지 확인됨\n- 인프라 모니터링 + APM 으로 요청 검사\n- 빈스톡의 nginx 기본 설정이 잘 막혀있도록 설정되어있음\n\n\n#### ec2 os 패치\n- devops, sta running 으로 검색\n- 인스턴스 백업\n\t- 이미지 및 템플릿 - 이미지 생성 = 스냅샷 생성\n\t- 이미지 이름은 인스턴스 이름 + BACKUP-날짜\n\t- 운영에서는 재부팅 안 함을 활성화\n\t- AMI 에 생성됨, 볼륨 생성됨, 스냅샷 생성됨\n- 시연은 JUMPSERVER를 이용해서 접속해서 했음 \n\t- (근데 끊어져서 서버가 뻑난적이 있음. 접속이 끊어지면 안됨)\n- os 확인 - centos\n- sudo yum update -x docker* (docker 관련 리소스는 업데이트 안함)\n\t- docker는 업데이트를 안했는데도 도커가 재시작 되는 경우가 있음\n\t- 운영에서는 해당 인스턴스를 LB에서 빼주는게 안전\n\t- 도커는 업데이트 해도 되는데 파라미터 수정해줘야 함\n- 리눅스 재시작\n\t- sudo shutdown -r now\n- 패치 확인\n\t- last reboot\n\t- version 이 다르게 표시된 걸로 확인\n- 도커 컨테이너 확인해서 실행 안되어있으면 실행\n- /usr/lib/systemd/system/docker.service\n\t- ExecStart=/usr/bin/dockerd 이 줄에 -H 옵션이 붙어있다면\n\t- 뒤에 -H 붙이지 않는 걸로 수정해줘야 함\n\t- -H fd:// --containerd=/run/containerd/containerd.sock\n- 수정파일 적용\n\t- sudo systemctl daemon-reload\n\nEB Incorrect application version found on all instances. Expected version 에러\n- 인스턴스 1개면 EC2 리부팅 해주면 다시 됨\n\n#### eks\n개발자 작업내역 로깅?\n개발자별 권한관리\n\n```\nawslogs get /aws/lambda/lambda-func-fnc-stg-an2-send-email-nhn ALL \\\n  --start='1h ago' --watch \\\n  --profile ums-dev --aws-region ap-northeast-2\n```\n\n\n\n#### 점프서버\njumpserver 안쓰면 다른 ssh 툴로 접속해야 하나?\ndocker 업데이트 후 수정해야하는 것과 아닌 것의 차이는?\ndockerfile은 어디에 있을까?\n\n- 서버 접근 제어 솔루션\n- 점프서버를 aws2020에 설치하여 사용\n- 누가 언제 접속하고 어떤걸 했는지 로깅\n- 동영상으로도 저장\n\n#### 시스템 버전 업데이트 어떻게 할 것인가\n#infra \nec2, rds 업데이트\nstg-eks 는 terraform\nrds 는 aws console에서 수정 눌러서 업데이트\n- 블루/그린 배포 추가된듯?\n- mysql 5.6 -> 8로 업데이트 시 인스턴스 변경 필요한데 어떻게 하면 사이드이펙이 적을까\n\n500에러\nALB에서 500 에러가 발생 가능하다\nELB는 가지고 있는 큐가 1024개 제한이 있다\n\n#### RDS 디비 접속\n#infra\n서브넷이 private용으로 돼있는데\nsecurity group 만 풀어주면 접속이 되나? 아니면 서브넷도 풀어줘야 하나?\n서브넷이 nat 만 열려있어서 그렇다. igw 연결 시켜줘야 했음.\n근데 db-public을 만드는 방향으로 가야함\n\n\n#### IAM\nIAM 적용에는 시간이 걸린다 #infra \n\n\n#### 키네시스 로컬 테스트\n- docker-compose 실행\n- stream 생성\n- 큐에 넣기\n- 이터레이터 조회\n\t- 이터레이터로 레코드 조회\n- 레코드 데이터 base64 디코딩\n- 이터레이터 유효기간 때문에 처음에만 조회가 된다\n- 이터레이터를 새로 받으면 ~ 된다\n- 이터레이터를 먼저 환경변수에 세팅하고, 값을 넣으면 그 이터레이터로 조회가능\n\n로컬 키네시스 테스트\n- 이터레이터 하나 확인 (source get_records.sh 하면 환경변수에 저장 가능)\n\t- 키네시스로 전송\n\t- 레코드 확인 (레코드가 배열로 여러개 있음)\n\t- base64 디코딩\n\t- json 형식으로 변환\nstderr, stdout 일 때 처리를 다르게 해줘야 하나..\n#infra \n\ncdn -> \ncache, cdn을 둬서 사용자가 많아져도 부하를 줄일 수 있다\n헤더를 한줄로 만들어서 람다로 분해해서 cdn에서 인식하게 한다\n- 조작을 방지하기 위해\n#infra\n\n[[이벤트 드리븐]] #infra \n\n- 쿠버네티스\n\t- 인그레스로 연결 접속 허용하는 사람 설정\n\t- 인그레스 여러 개 사용하면서 적합한 것 사용\n\n- lb용으로 서브넷 따로 따져있음\n- 스테이지는 스팟인스턴스 사용\n- 디비는 메모리많은걸 써서 캐시 잘 되게 함. 조인할때도 그렇고 메모리에 적재할때 부족하면 느려져서 많으면 좋음\n- eks_manage_user 로 하면 생성할때만 설정가능해서 role로 관리하는게 나을수도\n- proxy_protocol_v2 -> 클라이언트 ip 전달을 위해 헤더에 값 넣어주기 위한 설정 (https://purpleio.atlassian.net/wiki/spaces/PURPLEIO/pages/168067247/AWS+ELB+ALB+NLB+CLB+nginx+ingress+EC2)\n\t- nlb 는 ppv2 지원\n\t- alb 는 x-forwarded-for 헤더에 기본 지원\n\t- nlb 에 annotation 설정 해주면 됨\n\t- configMap 에도 설정\n\t- 타겟 그룹에 preserve client ip address 값에 따라\n\t\t- sg에 클라이언트 ip 를 열어줘야 할 수 있음\n- 디비는 테라폼으로 같이 묶여있으면 지울때 날라가면 크리티컬\n\t- 그냥 테라폼코드를 지우면 삭제하는 동작을 해서 따로 안보게 하는 설정을 해줘야 함\n\nblue, green은 statefulset 으로 되있는데 다른건 뭘로 되어있는지? <-> deployment\n- deployment 대신 쓰는건데\n- service를 다른걸 쓴다\n- 파드가 죽다 살아나도 그 파드 그대로 사용된다\n\nec2에 설치된 오라클은 플러그인같은걸 쓰고 있었는데 RDS에서는 못써서, 근데 개선할 예정\n\nlb controller\n- ELB, NLB 를 쿠버네티스가 관리할 수 있게 해주는 컨트롤러\n- ingress controller가 예전버전인데 이걸 써야 nlb - ingress 연결이 된다?\n- https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html\n\nCLB에 비해 NLB 의 달라진 점은 어떤게 있지\n\n버전을 variable로 다 빼도 될까?\n- 차트별로 버전 확인하려면 어떤 리소스인지 봐야되서 왔다갔다 하기 번거로울 수 있다\n\nlocals랑 variables랑 뭐가 다르지\n- locals 는 상수\n- variables 는 terrafrom 명령어 칠 때 사용자가 변수 주입 가능\n- output 은 모듈 외부에서 값 받아쓸 때 사용 가능\n\n2023으로 만든거에 helm으로 만든거는 eks 위에서 안뜨나?\n- argo를 먼저 띄워놓고 그걸로 띄우나? <-> 모니터링 같은 시스템 쪽은 argo로 배포 안해도 될텐데\n- helm 자체가 eks 위에서 실행되긴 해야하는데\n\nhttps://sineui.home.blog/2020/02/29/aws-eks-clb-alb%EB%A1%9C-%EC%9D%B4%EC%A0%84%ED%95%98%EA%B8%B0-1-%EB%B0%B0%EA%B2%BD/\n\n\n#### argocd\n처음 깔면 레포지토리 등록\ngitlab에서 repository > deploy token 에서 토큰 생성 후에 등록\nargocd에서 destination 추가\n\na 레코드로 하면 한번에 아이피를 찌르는데\ncname 을 거치면 한번 더 쳐야 되서 a 레코드가 낫다\n\nargocd에서 kubernetes namespace를 바꿀 때 ingress가 안지워지면 새로운 ingress가 안뜬다. 자동으로 안됨. service나 deployment도 안지워지고 새로운게 뜸\n\n\n\n---\n\n- [ ] kubernetes toleration, taint\n\t- taint\n\t\t- 노드에 설정\n\t\t- 팟이 할당 안되도록 하는 설정\n\t\t- 이름을 명시적으로 설정. (ex: system, normal, large)\n\t\t- tolerations와 함께 써서 특정 노드에만 뜨게 하기 위해 사용\n\t- tolerations\n\t\t- 팟에 설정\n\t\t- key, operator, value, effect 를 taint에 설정된 것과 같게 입력해주면\n\t\t- taint가 설정 되어 있어도 할당 되게 해줌\n\t\t- 만약 해당 taint값이 없으면 생성이 실패되나?\n\t\t- node selector와는 어떤 관계지\n\t\t- node affinity도 있음\n\nroute 53 연결 해줬는데 인증서가 kolonmall 이 없는걸로 연결되서 400으로 에러남\n- 인증서 바꿔주면 시간 지나면 적용 됨. 캐시 남아있을 수 있음\n\ningress에 nodeSelector가 manage로 되어있던데 eks 만들때는 manage로 tag 걸어논게 없던데 이상없이 잘 떴음. manage는 기본으로 생성되는건가 아니면 이름 없으면 그냥 아무거나 붙는건가?\n\nkop-api 띄우다가 image 없다고 에러 뜸\n- ecr에 lifecycle policy에 50개까지만 저장한다고 설정되어있음\n\nkop-web, kop-hybris beta 는 kop30-frontend 에서 ingress를 띄워서 연결해서 쓰고 있음\n\nexternal dns를 helm으로 띄워서 팟이 인터벌 간격마다 확인하면서 dns 할당하는 역할을 함\n주소 매핑할때는 kubernetes 에 어노테이션 달아주면 되는데, ingress에 hosts 등록되어있어도 되는 거 같다\n\nkeyv-cronjob\n- 레디스에 쓸데없는 거 쌓인 거 지워주는 크론\n- 무슨 라이브러리 쓰는게 있는데 그거때문에 데이터가 계속 쌓여서 메모리를 많이 차지해서 임시로 지워주게 처리함\n- 그 라이브러리가 keyv 일 수 있음\n\n레디스 elasticache 버전이랑 클라이언트 버전 맞춰주기\n\n디비나 레디스같은 건 인바운드 열어줘야 할 수 있으니 확인\n\n하이브리스도 레디스에 로그인 세션 저장해서 사용중\n\n- aws cni \n\t- container network interface\n\t- eks 가 아닌 기본 쿠버네티스를 띄울 때는 calico 등을 썼었는데 그것의 aws 버전\n\n모니터링 테라폼 켤 때 aws cni 에서 ip 할당 안되는 에러 발생\n인스턴스 마다 할당 가능한 ip 제한이 있다 - 근데 xlarge 정도면 충분한듯\naws cni 설정 중에 minimum ip 관련 설정이 있다\naws cni 설정을 지우고 띄워보니 뜬다\n- [ ] warm 어쩌고 설정이 어떤 건지 확인\n- [ ] 해당 ip 설정 어떻게 하면 좋을지 확인\n- aws eks cni\n\t- 이 설정이 eks 설정 전체에 되는거라 minumum 설정 때문에 전체 ip가 부족했을 수 있을까?\n\t- warm ip\n\t- warm prefix target\n\t\t- 이걸 4로 했을 때의 의미는?\n\t\t- 이거 말고 다른 설정이 보통 안내되긴 하는데 잘 설정한거맞나?\n\t\t- ENABLE_PREFIX_DELEGATION 이 설정은 없어도 되나?\n\t- minimum ip target\n\t\t- 노드가 처음 나타날 때 최소 IP 할당 개수\n\t- l-ipamd\n\t- c6i.xlarge 58 - eni max pods\n![[Pasted image 20231102182900.png]]\nhttps://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html\n\neni 할당 모드에 secondary ip mode와 prefix 모드가 있다\n![[Pasted image 20231102170558.png]]\nhttps://www.eksworkshop.com/docs/networking/prefix/\nhttps://dobby-isfree.tistory.com/201\n- secondary ip mode가 디폴트인데\n- prefix 모드가 새로 나왔고 aws에서 권장하는 옵션\n- prefix 모드로 하면 ip 할당에 api 호출이 필요없이 빠르게 된다고 한다.\n\n\nhttps://aws.amazon.com/ko/about-aws/whats-new/2022/12/amazon-s3-automatically-enable-block-public-access-disable-access-control-lists-buckets-april-2023/\n- s3 정책 수정되어서 최근 s3 버킷은 생성 시 ownership 유형 설정 추가 필요\n\nloki 설치하니까 너무 팟이 많아서 인스턴스가 더 떠서 다 필요한 건지 확인\n레플리카 줄여서 띄움\n\n그라파나에서 로키 수동 등록\n\n그라파나 ldap 로그인 다 허용되서 제한 필요\n\n\n## 인프라 레퍼런스\n\n#### 당근마켓 당근페이 인프라 구축 이야기\n\n핀테크 기업으로서 보안 등 제약이 있는 상황에서 클라우드 서비스를 이용해야 했음\n\n1. 로그인서비스를 어떻게 구성했는가\n   - 계정 별로 환경 분리\n   - 로그인 제한 -> 계정 별로 분리되어있지만 로그인은 대표계정에서 한다. cloudfnc와 동일하네\n     - 로그인은 security라는 계정이고 이 계정은 로그인만을 위해서 사용하고, 이렇게 로그인하면 dev, sta, prod 계정에 접속이 가능하게 된다. 외부 접근권한이 있는 security가 탈취되어도 dev에 접근 못하게 되면 아무것도 할 수 없다는 식\n   - 계정 탈취 시 여파 최소화\n2. 서버 접근을 어떻게 할 것인가\n   - teleport - ssh 접속 후 행동을 영상으로 녹화해서 보여준다\n3. 애플리케이션 구성을 어떻게 할 것인가\n   - kubernetes vs ec2\n   - 쿠버네티스가 오버 엔지니어링이 아닐까 싶었지만\n     같은 회사 다른 서비스에서 사용중이어서 조언을 얻을 수 있었고, 같은 팀의 팀원이 사용 경험이 있어서 충분히 도움을 받을 수 있는 환경이어서 사용하기로 했다\n   - alb -> istio 변환 예정\n4. 배포 파이프라인 구성을 어떻게 할 것인가\n   - eks 에 맞는 도구를 찾으려고 했다\n   - 툴에 대한 운영 경험이 있고 Github과 연계가 손쉽게 구성될 수 있는 기술 스택 선택\n   - Github Actions, Argocd, Argocd pipeline\n   - github 설치형을 n5.4xlarge 에 사용. 디스크 관리만 하면 무리없이 사용하기에 좋았음\n5. 관측 시스템을 어떻게 구성할 것인가\n   - 컨플라이언스 (보안) 문제로 SaaS 사용이 힘들었음 (Datadog, new relic 등)\n   - ElasticStack, Prometheus, Grafana 로 직접 구축\n   - FileBeat, Node Exporter 는 DaemonSet으로 올림\n   - Prometheus Operator를 이용해 Prometheus를 구성함\n   - AWS 리소스는 CloudWatch를 통해 모니터링\n     - SNS -> AWS Chatbot을 통해 Slack 으로 발송. (이전에는 람다를 직접 구현했어야했음)\n6. 성능 테스트를 어떻게 진행할 것인가\n   - locust (kubernetes용인 klocust를 이용)\n   - 테스트의 목적\n     - 최대 성능을 측정하는 형태는 목적이 불분명\n     - 10분 동안의 테스트를 통해 99퍼센타일 응답 시간이 100 ms 이내일 때의 최대 TPS를 구하려고 함 -> 99%가 진행됐을 때의 응답 시간이 100ms ?\n     - 파드 하나당 400TPS 라는 수치를 얻게 됨\n   - 테스트를 하면서 close_wait 소켓이 쌓이는 현상 발견. undertow를 netty로 변경\n\nhttps://www.youtube.com/watch?v=8a2-b9X7Xno\n\n#### 당근 채팅 시스템 아키텍처\n큰 회사에서도 개발을 하는 인원은 적을 수 있고 최대한 매니지드 서비스를 이용하는 경향이 있다\n\ndynamodb를 쓰면서 에러는 거의 안나서 안정적이었다\n근데 쿼리를 잘 쓰기 어렵고 인덱스를 건 item만 가져올 수 있어서 인덱스를 잘 두어야하기 때문에 설계에 대해서 고민이 많이 필요함, Full scan은 안해야한다\n채팅방 하나를 partition하나 정의\nsort key\b는 message의 id로 설정\n\nredis cluster로 stateless하게 웹소켓용으로 썼고 좋아보임\n\n\n#### 람다를 이용한 아키텍처 모범 사례\n\n> 서버 기반 아키텍처 모범 사례가 있습니다.(단일 장애 지점 제거, 배포 전 변경 사항 테스트, 중요한 데이터 암호화 등)\n> - https://dc2348.tistory.com/6#:~:text=%EC%84%9C%EB%B2%84%20%EA%B8%B0%EB%B0%98%20%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98%20%EB%AA%A8%EB%B2%94%20%EC%82%AC%EB%A🙋‍♂️1%80%EA%B0%80%20%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4.(%EB%8B%A8%EC%9D%BC%20%EC%9E%A5%EC%95%A0%20%EC%A7%80%EC%A0%90%20%EC%A0%9C%EA%B1%B0%2C%20%EB%B0%B0%ED%8F%AC%20%EC%A0%84%20%EB%B3%80%EA%B2%BD%20%EC%82%AC%ED%95%AD%20%ED%85%8C%EC%8A%A4%ED%8A%B8%2C%20%EC%A4%91%EC%9A%94%ED%95%9C%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EC%95%94%ED%98%B8%ED%99%94%20%EB%93%B1)\n\n- 단순한 동작을 여러겹으로 겹치면 깔끔하고 보기도 좋지 않을까?\n- 유닉스의 파이프라인처럼 api를 파이프라이닝 해서 원하는 값을 만들어도 괜찮을까\n\t- 함수형 프로그래밍을 이용해서 파이프라이닝 형태로 만들어주는 api를 만들어서 api로 api를 불러서 파이프라이닝 하는 것.\n\n\n#### 시퀀스\n\n어두운 도서관 입구에서 시작해서\n가장 중심인 곳은 가장 밝은 판테온 형태의 밝은 전시관이 있다\n\n[[2022-05-01#빨강 - 핑크 - 보라]]\n\n#### 패턴화\n\n가드레일을 만들되 자유도를 느낄 수 있도록\n\n- 젤다의전설\n- 오픈형월드게임\n\n","frontmatter":{"title":"Infra","summary":null,"date":"2025, 05 06","updated":"2025, 07 23","tags":"deep_knowledge","parent":null},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%9D%B8%ED%94%84%EB%9D%BC-%EB%A0%88%EB%B2%A8\">인프라 레벨</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#%EC%B5%9C%EC%86%8C%ED%95%9C%EC%9D%98-%EC%9D%B8%ED%94%84%EB%9D%BC\">최소한의 인프라</a></li>\n<li><a href=\"#%EA%B7%9C%EB%AA%A8%EA%B0%80-%EC%BB%A4%EC%A7%90%EC%97%90-%EB%94%B0%EB%9D%BC-%EC%95%88%EC%A0%95%EC%A0%81%EC%9D%B8-%EC%9A%B4%EC%98%81%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%B6%94%EA%B0%80-%EC%9D%B8%ED%94%84%EB%9D%BC\">규모가 커짐에 따라 안정적인 운영을 위한 추가 인프라</a></li>\n<li><a href=\"#%EA%B0%95%EB%A0%A5%ED%95%98%EA%B2%8C-%ED%83%84%ED%83%84%ED%95%9C-%EC%9D%B8%ED%94%84%EB%9D%BC\">강력하게 탄탄한 인프라</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#about-cloud\">About Cloud</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#%EB%AA%A8%EB%93%A0%EA%B2%83%EC%9D%84-%EC%9C%84%ED%95%9C-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%EB%8A%94-%EC%97%86%EB%8B%A4\">모든것을 위한 클라우드는 없다</a></li>\n<li><a href=\"#%EC%A0%95%EC%A0%81%ED%8E%98%EC%9D%B4%EC%A7%80%EB%A1%9C-%EC%B5%9C%EB%8C%80%ED%95%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%84%9C-cdn-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B8%B0\">정적페이지로 최대한 만들어서 cdn 이용하기</a></li>\n<li><a href=\"#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%EB%8A%94-%ED%8E%B8%EB%A6%AC%ED%95%98%EC%A7%80%EB%A7%8C-%EB%82%B4%EB%B6%80%EB%A5%BC-%ED%86%B5%EC%A0%9C%ED%95%A0-%EC%88%98-%EC%97%86%EB%8B%A4\">클라우드는 편리하지만 내부를 통제할 수 없다</a></li>\n<li><a href=\"#ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%9A%94%EA%B8%88-%ED%95%AD%EB%AA%A9\">ec2 인스턴스 리소스 요금 항목</a></li>\n<li><a href=\"#aws-%EC%84%9C%EB%B2%84%EB%93%A4-%EA%B0%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\">aws 서버들 간 벤치마크</a></li>\n<li><a href=\"#kubernetes-%EC%85%8B%ED%8C%85%EC%9D%84-%EC%9C%84%ED%95%9C-cloud-hosting-%EC%9E%90%EC%9B%90-%EC%A2%85%EB%A5%98\">kubernetes 셋팅을 위한 cloud hosting 자원 종류</a></li>\n<li><a href=\"#nat-gateway-%EB%B9%84%EC%9A%A9%EC%9D%B4-%EC%9D%80%EA%B7%BC-%EB%A7%8E%EC%9D%B4-%EB%82%98%EC%98%AC-%EC%88%98-%EC%9E%88%EC%9D%8C\">NAT gateway 비용이 은근 많이 나올 수 있음</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#serverless\">Serverless</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#%EB%9E%8C%EB%8B%A4%EB%A5%BC-%EA%B8%B0%EA%B0%80-%EB%A7%89%ED%9E%88%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B3%A0-%EC%8B%B6%EB%8B%A4--%ED%81%90%EC%99%80-%ED%95%A8%EA%BB%98\">람다를 기가 막히게 사용하고 싶다 + 큐와 함께</a></li>\n<li><a href=\"#%EC%84%9C%EB%B2%84%EB%A6%AC%EC%8A%A4%EB%A5%BC-%EC%84%A0%ED%98%B8\">서버리스를 선호</a></li>\n<li><a href=\"#%EB%9E%8C%EB%8B%A4%EC%9D%98-%EC%95%BD%EC%A0%90\">람다의 약점</a></li>\n<li><a href=\"#%EC%84%9C%EB%B2%84%EB%A6%AC%EC%8A%A4-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EB%8B%A8%EC%A0%90\">서버리스 프레임워크 단점</a></li>\n<li><a href=\"#%EB%9E%8C%EB%8B%A4%EB%A5%BC-%ED%81%B0-%EA%B7%9C%EB%AA%A8%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C-%EB%BC%88%EB%8C%80%EB%A5%BC-%EC%9E%A1%EC%95%84%EC%A3%BC%EB%8A%94-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC\">람다를 큰 규모로 사용할 때 뼈대를 잡아주는 프레임워크</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#aws\">AWS</a></p>\n<ul>\n<li><a href=\"#%EC%8B%A0%EA%B7%9C-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%ED%99%95%EC%9D%B8\">신규 업데이트 확인</a></li>\n<li><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC\">네트워크</a></li>\n<li><a href=\"#%EC%BB%B4%ED%93%A8%ED%8C%85\">컴퓨팅</a></li>\n<li><a href=\"#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80\">스토리지</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#vpc\">VPC</a></p>\n</li>\n<li>\n<p><a href=\"#iam\">IAM</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#iam-guidelines--best-practices\">IAM Guidelines &#x26; Best Practices</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#storage\">Storage</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#%EB%A9%94%EC%8B%9C%EC%A7%80-%ED%81%90\">메시지 큐</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#hands-on\">Hands-on</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#aws-beanstalk-eip-%EC%97%86%EC%9D%B4-%EC%A0%91%EC%86%8D%ED%95%98%EA%B8%B0\">aws beanstalk eip 없이 접속하기</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#aws-%EC%9E%90%EA%B2%A9%EC%A6%9D\">AWS 자격증</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#aws-developer-associate\">AWS Developer Associate</a></li>\n<li><a href=\"#saa\">SAA</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#test-%EC%A0%84%EB%9E%B5\">Test 전략</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#how-to-test\">how to test</a></li>\n<li><a href=\"#server-stress-test\">server stress test</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#temp\">TEMP</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#%EB%B3%80%EA%B2%BD-%ED%8C%8C%EC%9D%BC%EB%A7%8C-%EA%B2%80%EC%82%AC%ED%95%98%EB%8A%94-lint\">변경 파일만 검사하는 lint</a></li>\n<li><a href=\"#%EC%9D%B8%ED%94%84%EB%9D%BC\">인프라</a></li>\n<li><a href=\"#ec2-os-%ED%8C%A8%EC%B9%98\">ec2 os 패치</a></li>\n<li><a href=\"#eks\">eks</a></li>\n<li><a href=\"#%EC%A0%90%ED%94%84%EC%84%9C%EB%B2%84\">점프서버</a></li>\n<li><a href=\"#%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%B2%84%EC%A0%84-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80\">시스템 버전 업데이트 어떻게 할 것인가</a></li>\n<li><a href=\"#rds-%EB%94%94%EB%B9%84-%EC%A0%91%EC%86%8D\">RDS 디비 접속</a></li>\n<li><a href=\"#iam-1\">IAM</a></li>\n<li><a href=\"#%ED%82%A4%EB%84%A4%EC%8B%9C%EC%8A%A4-%EB%A1%9C%EC%BB%AC-%ED%85%8C%EC%8A%A4%ED%8A%B8\">키네시스 로컬 테스트</a></li>\n<li><a href=\"#argocd\">argocd</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B8%ED%94%84%EB%9D%BC-%EB%A0%88%ED%8D%BC%EB%9F%B0%EC%8A%A4\">인프라 레퍼런스</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#%EB%8B%B9%EA%B7%BC%EB%A7%88%EC%BC%93-%EB%8B%B9%EA%B7%BC%ED%8E%98%EC%9D%B4-%EC%9D%B8%ED%94%84%EB%9D%BC-%EA%B5%AC%EC%B6%95-%EC%9D%B4%EC%95%BC%EA%B8%B0\">당근마켓 당근페이 인프라 구축 이야기</a></li>\n<li><a href=\"#%EB%8B%B9%EA%B7%BC-%EC%B1%84%ED%8C%85-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98\">당근 채팅 시스템 아키텍처</a></li>\n<li><a href=\"#%EB%9E%8C%EB%8B%A4%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%AA%A8%EB%B2%94-%EC%82%AC%EB%A1%80\">람다를 이용한 아키텍처 모범 사례</a></li>\n<li><a href=\"#%EC%8B%9C%ED%80%80%EC%8A%A4\">시퀀스</a></li>\n<li><a href=\"#%ED%8C%A8%ED%84%B4%ED%99%94\">패턴화</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>"}},"pageContext":{"slug":"/infra/","previous":{"fields":{"slug":"/product/"},"frontmatter":{"title":"Product","tags":"deep_knowledge"},"fileAbsolutePath":"/home/runner/work/shdkej.github.io/shdkej.github.io/content/Deep Knowledge/Product.md"},"next":{"fields":{"slug":"/love/"},"frontmatter":{"title":"Love","tags":"human"},"fileAbsolutePath":"/home/runner/work/shdkej.github.io/shdkej.github.io/content/Human/Love.md"},"filePath":"Deep Knowledge/Infra.md"}},"staticQueryHashes":["3000541721","4165914708","488914979"],"slicesMap":{}}