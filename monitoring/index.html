<!DOCTYPE html><html lang="kr"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><script>
            (function(c,l,a,r,i,t,y){
                c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
            })(window, document, "clarity", "script", "446ekw0kl6");
            </script><script data-ad-client="ca-pub-8002857692825455" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><meta name="naver-site-verification" content="0738293103ffff9ea9eb43b3c9621e5fb353f97b"/><meta name="generator" content="Gatsby 5.14.5"/><meta data-react-helmet="true" name="description" content="Monitoring  중요한 포인트 urgent important system 보안 (로그인 체크) load average error message memory disk network + time wait port https://www.mimul.com/blog/linux-server…"/><meta data-react-helmet="true" property="og:title" content=""/><meta data-react-helmet="true" property="og:description" content="Monitoring  중요한 포인트 urgent important system 보안 (로그인 체크) load average error message memory disk network + time wait port https://www.mimul.com/blog/linux-server…"/><meta data-react-helmet="true" property="og:type" content="website"/><style data-href="/styles.903cab3a6739cf62f9b3.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}:root{--main-color:#2a2a2a;--second-color:#e0e0e0;--heading-color:#ff8c00}[data-theme=dark]{--main-color:silver;--second-color:#000;--heading-color:salmon}body{background-color:var(--main-color,var(--second-color));color:var(--second-color);font-family:sans-serif;font-size:19px;margin:1rem auto;max-width:900px;padding:1rem}.blog-post-item{border-left:2px solid #404040;line-height:1.2;margin-bottom:32px;padding-left:16px}.blog-post-item:last-child{margin-bottom:0}@media (max-width:767px){.blog-post-item{border-left:1px solid #404040;margin-bottom:24px;padding-left:12px}}@media (min-width:768px){body{background-color:#2a2a2a;letter-spacing:.01em;line-height:1.7}body,p{color:#e0e0e0}p{margin-bottom:1.2em;text-align:justify}h1,h2,h3,h4,h5,h6{color:#f0f0f0;line-height:1.4;margin-bottom:.8em}h1{border-bottom:2px solid #404040;font-size:2.2em;padding-bottom:.3em}h2{border-bottom:1px solid #404040;font-size:1.8em;padding-bottom:.2em}h3{color:#d0d0d0;font-size:1.4em}a{border-bottom:1px solid transparent;color:#7bb3d1;text-decoration:none;transition:border-bottom-color .2s ease}a:hover{border-bottom-color:#7bb3d1}a:visited{color:#7bb3ce}pre{background:#1e1e1e;border:1px solid #404040;border-radius:6px;margin:1.5em 0;padding:20px}code{background:rgba(255,157,107,.1);border-radius:3px;color:#ff9d6b;padding:2px 6px}blockquote{background:hsla(0,0%,100%,.02);border-left:2px solid #555;color:#b8b8b8;font-style:italic;margin:1.5em 0;padding:1em 1.2em}ol,ul{margin:1.2em 0;padding-left:2em}li{line-height:1.6;margin:.5em 0}figcaption{color:#b0b0b0;font-size:.9em;margin-top:.5em}.content-toc a{color:#7bb3d1;margin:0;padding:0;text-decoration:underline;transition:color .2s ease}.content-toc a:hover{color:#9bc7e0}article header,article section,article small{line-height:1.2}.square,.square-field{line-height:1.3}.square ul{line-height:1.2;margin-top:.5em}.square li{line-height:1.2;margin:.2em 0}}h1{color:var(--heading-color)}h2:before{content:"# "}h2,h3,h4{margin-left:-15px;margin-top:50px}h4:before{content:"## "}p{color:var(--second-color,var(--main-color));margin-bottom:0}ul{margin-top:0;padding-inline-start:20px}ul p{margin:0}li{margin-bottom:5px;margin-top:5px}a{color:#40a0bd;display:inline-block;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:top}a:visited{color:#40a0ba}pre{background:#161b22;padding:15px}code{color:salmon;display:block;overflow:auto;word-break:break-all}blockquote{font-style:italic}header h3{margin:2em 0 0}:target:before{content:"";display:block;height:50px;margin-top:-50px}@media (min-width:1200px){.content-toc{display:block;max-height:60vh;overflow-x:hidden;overflow-y:auto;padding:0 20px;position:fixed;right:0;top:300px;width:20%}.toc-header{top:280px}}@media (max-width:1200px){.content-toc{margin-top:50px}}@media (max-width:600px){.square{grid-column:1/4}.square-center{display:none!important}}.square-field{grid-gap:10px;display:grid;font-weight:700;grid-template-areas:". . ." ". center ." ". . .";grid-template-columns:repeat(3,1fr)}.square{border:1px solid #fff;border-radius:5px;overflow:hidden;padding:10px;text-overflow:ellipsis}.square-center{align-items:center;background:linear-gradient(90deg,#6a11cb 0,#2575fc);border-radius:5px;color:#fff;display:flex;grid-area:center;justify-content:center}.rel{display:inline-block;opacity:.8;padding:5px}:not(pre)>code[class*=language-]{background:none;color:salmon;display:inline}figcaption{color:#999;font-size:.8em;text-align:center}</style><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-GPKPTMNVF5"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'G-GPKPTMNVF5'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = false;

    var options = {
      send_page_view: false
    };
    if (false) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'G-GPKPTMNVF5', options);
  </script></head><body class=""><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><header><nav><a href="/">SH</a> | <a href="/tags/">WIKI</a> | <a href="/about/">ABOUT</a></nav></header><br/>---<main><article><header><h1></h1><p></p><small style="width:50%">Created: <!-- --> &gt;<a href="https://github.com/shdkej/shdkej.github.io/blame/master/content/Deep Knowledge/Monitoring.md">Updated: </a></small></header><nav class="content-toc"><strong>Table of Contents</strong><div><ul>
<li>
<p><a href="#monitoring">Monitoring</a></p>
<ul>
<li>
<ul>
<li><a href="#%EC%A4%91%EC%9A%94%ED%95%9C-%ED%8F%AC%EC%9D%B8%ED%8A%B8">중요한 포인트</a></li>
<li><a href="#system">system</a></li>
<li><a href="#%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EC%A7%80%ED%91%9C">모니터링 지표</a></li>
<li><a href="#web">web</a></li>
<li><a href="#%EC%9B%B9-%EC%84%B1%EB%8A%A5-%ED%99%95%EC%9D%B8-%EC%A7%80%ED%91%9C">웹 성능 확인 지표</a></li>
<li><a href="#%ED%8A%B8%EB%9E%98%ED%94%BD%EC%9D%84-%EC%B8%A1%EC%A0%95%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95">트래픽을 측정하는 방법?</a></li>
<li><a href="#%EB%A9%94%EC%9D%B8-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%ED%8C%90%EB%84%AC%EC%97%90%EC%84%9C-%EB%B3%B4%EC%97%AC%EC%A0%B8%EC%95%BC-%ED%95%A0-%EA%B2%83%EB%93%A4">메인 모니터링 판넬에서 보여져야 할 것들</a></li>
<li><a href="#monitoring-1">monitoring</a></li>
<li><a href="#p95p99">p95/p99</a></li>
<li><a href="#etc">etc</a></li>
<li><a href="#%EC%84%9C%EB%B2%84%EB%A5%BC-%EC%98%A4%EB%9E%98-%EC%BC%9C%EB%86%93%EC%95%98%EC%9D%84-%EB%95%8C-%EC%83%9D%EA%B8%B0%EB%8A%94-%EB%AC%B8%EC%A0%9C%EC%A0%90">서버를 오래 켜놓았을 때 생기는 문제점</a></li>
<li><a href="#%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EB%B2%94%EC%A3%BC">모니터링 범주</a></li>
<li><a href="#%EB%AC%B8%EC%A0%9C-%EB%B6%84%EC%84%9D%EA%B3%BC-%EC%9E%AC%EB%B0%9C-%EB%B0%A9%EC%A7%80">문제 분석과 재발 방지</a></li>
<li><a href="#%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%84%9C%EB%B2%84%EC%97%90%EC%84%9C-%EA%B2%AA%EB%8A%94-%EB%AC%B8%EC%A0%9C">대규모 서버에서 겪는 문제</a></li>
<li><a href="#%EB%8C%80%EC%9A%A9%EB%9F%89-%ED%8A%B8%EB%9E%98%ED%94%BD">대용량 트래픽</a></li>
<li><a href="#%EC%9D%98%EC%82%AC-%EA%B2%B0%EC%A0%95-%ED%8A%B8%EB%A6%AC%EB%A1%9C-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%ED%95%98%EB%A9%B4-%EB%90%98%EB%A0%A4%EB%82%98">의사 결정 트리로 시스템 모니터링 하면 되려나</a></li>
<li><a href="#observability%EB%A5%BC-%EB%86%92%EC%9D%B4%EA%B8%B0-%EC%9C%84%ED%95%B4%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EC%95%BC%ED%95%A0%EA%B9%8C">Observability를 높이기 위해서는 어떻게 해야할까</a></li>
<li><a href="#reference">reference</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#benchmark">Benchmark</a></p>
<ul>
<li>
<ul>
<li><a href="#%EC%84%9C%EB%B2%84-%EC%84%B1%EB%8A%A5%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC">서버 성능별 벤치마크</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#tool">Tool</a></p>
</li>
<li>
<p><a href="#prometheus">prometheus</a></p>
<ul>
<li>
<ul>
<li><a href="#elk-vs-tick">ELK vs TICK</a></li>
<li><a href="#grafana-alert">grafana alert</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#tick">TICK</a></p>
</li>
<li>
<p><a href="#benchmark-1">Benchmark</a></p>
</li>
</ul></div></nav><div style="border-top:1px solid;align:center"></div><section><h2 id="monitoring" style="position:relative;"><a href="#monitoring" aria-label="monitoring permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Monitoring</h2>
<p><figure class="gatsby-resp-image-figure" style="margin: 0 0 50px auto;">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 828px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/c5520b7f0352c4325b0ca5282fdda23f/b2cd5/observability.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 57.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHrLKaiX//EABYQAQEBAAAAAAAAAAAAAAAAAAIQMf/aAAgBAQABBQKGnP/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFn/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAHBAAAQMFAAAAAAAAAAAAAAAAAAEQcREhMVGh/9oACAEBAAE/IVnpfZgstVr/2gAMAwEAAgADAAAAEEMP/8QAFhEAAwAAAAAAAAAAAAAAAAAAEBFB/9oACAEDAQE/EFo//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAFh/9oACAECAQE/EMq//8QAHBABAAICAwEAAAAAAAAAAAAAAQARIVExYXGh/9oACAEBAAE/EFkFHFVDkZF/ZtMadSw+TJPc/9k='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="observability"
        title=""
        src="/static/c5520b7f0352c4325b0ca5282fdda23f/b2cd5/observability.jpg"
        srcset="/static/c5520b7f0352c4325b0ca5282fdda23f/863e1/observability.jpg 225w,
/static/c5520b7f0352c4325b0ca5282fdda23f/20e5d/observability.jpg 450w,
/static/c5520b7f0352c4325b0ca5282fdda23f/b2cd5/observability.jpg 828w"
        sizes="(max-width: 828px) 100vw, 828px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">observability</figcaption>
  </figure></p>
<h4 id="중요한-포인트" style="position:relative;"><a href="#%EC%A4%91%EC%9A%94%ED%95%9C-%ED%8F%AC%EC%9D%B8%ED%8A%B8" aria-label="중요한 포인트 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>중요한 포인트</h4>
<ul>
<li>urgent</li>
<li>important</li>
</ul>
<h4 id="system" style="position:relative;"><a href="#system" aria-label="system permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>system</h4>
<ul>
<li>보안 (로그인 체크)</li>
<li>load average</li>
<li>error message</li>
<li>memory</li>
<li>disk</li>
<li>network + time wait port</li>
<li><a href="https://www.mimul.com/blog/linux-server-operations/">https://www.mimul.com/blog/linux-server-operations/</a></li>
</ul>
<h4 id="모니터링-지표" style="position:relative;"><a href="#%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EC%A7%80%ED%91%9C" aria-label="모니터링 지표 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>모니터링 지표</h4>
<ul>
<li>비즈니스 (마케팅, 퍼널)
<ul>
<li>신규 유저 수</li>
<li>이탈 유저 수</li>
<li>cta 클릭율</li>
<li>주요 퍼널 drop off</li>
<li>캠페인별 전환 지표</li>
<li>ctr</li>
<li>세션 수 (마케팅 입장에서 서비스가 정상인지 확인하는 지표)</li>
</ul>
</li>
<li>프로덕트
<ul>
<li>p95</li>
<li>p99</li>
<li>오류율 (프론트)</li>
<li>LCP / FID</li>
</ul>
</li>
<li>시스템
<ul>
<li>메모리</li>
<li>cpu</li>
<li>auto scaling 관리</li>
<li>네트워크 지연</li>
<li>트래픽</li>
<li>인스턴스별 헬스체크</li>
<li>디스크</li>
</ul>
</li>
<li>앱
<ul>
<li>api별 latency</li>
<li>500 에러</li>
<li>400 에러</li>
<li>Error log count</li>
</ul>
</li>
<li>데이터 레이어
<ul>
<li>db slow query</li>
<li>queue</li>
<li>Cpu</li>
<li>Connection</li>
<li>Dlq</li>
</ul>
</li>
</ul>
<p>그 외 리포트 받아보면 좋을 내용</p>
<ul>
<li>비정상 증분</li>
<li>비용 스파이크</li>
<li>반복 고객 불만 사항</li>
<li>빌드 실패</li>
<li>롤백 수</li>
<li>분석에 필요한 지표들 (매출)</li>
</ul>
<p>체크해야할 것들</p>
<ul>
<li>로그인 잘 되는가</li>
<li>결제 잘 되는가</li>
<li>서버가 정상인가</li>
<li>a/b 테스트를 측정 가능한가</li>
<li>신규 유저와 이탈 유저 수</li>
<li>cta 클릭률</li>
<li>서버가 얼마나 쓰이고 있는가</li>
<li>동시간대 비교, 전일 비교 가능할까</li>
</ul>
<p>로그를 많이 남겨서 쿼리로 잘 검색되게 하는게 낫겠다 시스템 도구를 이용하자
퍼널 데이터도 클릭하우스로 모으고</p>
<p>이걸 하려면 기본적으로 loki, clickhouse를 써야하는데 무겁지 않을까. 공통으로 쓰다가 커지면 단독으로 빼면 되려나</p>
<h4 id="web" style="position:relative;"><a href="#web" aria-label="web permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web</h4>
<ul>
<li>api response time</li>
<li>웹 요청량</li>
<li>homepage health</li>
<li>접속자 로그</li>
<li>접속한 페이지</li>
<li>사람들이 어떤 메뉴를 많이 쓰는지 확인</li>
</ul>
<h4 id="웹-성능-확인-지표" style="position:relative;"><a href="#%EC%9B%B9-%EC%84%B1%EB%8A%A5-%ED%99%95%EC%9D%B8-%EC%A7%80%ED%91%9C" aria-label="웹 성능 확인 지표 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>웹 성능 확인 지표</h4>
<ul>
<li>DNS Lookup time</li>
<li>tcp 연결 시간 (브라우저와 서버간 연결 시간)</li>
<li>SSL 연결 시간</li>
<li>첫 번째 바이트 다운로드 시간</li>
<li>전체 다운로드 시간</li>
</ul>
<h4 id="트래픽을-측정하는-방법" style="position:relative;"><a href="#%ED%8A%B8%EB%9E%98%ED%94%BD%EC%9D%84-%EC%B8%A1%EC%A0%95%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95" aria-label="트래픽을 측정하는 방법 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>트래픽을 측정하는 방법?</h4>
<ul>
<li>tps</li>
<li>접속자 수</li>
<li>resource usage</li>
<li>page view</li>
<li>api count</li>
<li>loading time</li>
<li>response time</li>
</ul>
<h4 id="메인-모니터링-판넬에서-보여져야-할-것들" style="position:relative;"><a href="#%EB%A9%94%EC%9D%B8-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%ED%8C%90%EB%84%AC%EC%97%90%EC%84%9C-%EB%B3%B4%EC%97%AC%EC%A0%B8%EC%95%BC-%ED%95%A0-%EA%B2%83%EB%93%A4" aria-label="메인 모니터링 판넬에서 보여져야 할 것들 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>메인 모니터링 판넬에서 보여져야 할 것들</h4>
<ul>
<li>node 대수</li>
<li>cpu, memory 사용량
<ul>
<li>cpu, memory, disk, network</li>
</ul>
</li>
<li>응답량</li>
<li>처리 시간</li>
</ul>
<h4 id="monitoring-1" style="position:relative;"><a href="#monitoring-1" aria-label="monitoring 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>monitoring</h4>
<ul>
<li>application, framework, os, cloud 이 정도가 기본 관리 영역이겠다.</li>
<li>정상 상태를 추가해야한다. 범위를 정해서 이 정도면 정상인 범위로 놓고, 정상 범위 내를 계속 건드려서 카오스 테스팅 하고, 범위 벗어난 값은 다 알림 보내도록 해보면 좋겠다</li>
<li>알림은 정말 확인해야 하는 것과 일반적인 안내를 분리해야 하고 확실히 눈에 띄게 해야 한다</li>
</ul>
<h4 id="p95p99" style="position:relative;"><a href="#p95p99" aria-label="p95p99 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>p95/p99</h4>
<ul>
<li>95% 이상의 반응속도를 가진 사용자의 지표</li>
<li>p95가 300ms 면 95%의 사용자는 그 이하의 반응속도이고 5%의 유저는 더 느리다는 것. 평균값보다 실제 사용자 체감량에 대해 정확하다고 볼 수 있다</li>
<li>p95를 300ms 미만으로 유지한다. 를 지표로 둘 수 있다</li>
<li>99는 조금만 튀어도 확 바뀔 수 있어서 민감해서 95를 평상시 기준값으로 볼 수 있다</li>
</ul>
<h4 id="etc" style="position:relative;"><a href="#etc" aria-label="etc permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>etc</h4>
<ul>
<li>각 서비스 상태</li>
<li>노드 살아 있는지 체크</li>
<li>접속자 수</li>
<li>응답시간</li>
<li>처리시간</li>
<li>DB 관련</li>
<li>접속한 어플리캐이션</li>
<li>부하율</li>
<li>알람</li>
<li>docker up/total</li>
<li>트래픽 관리</li>
<li>GCDN</li>
<li>static code analysis</li>
<li>lambda, ec2, s3, Dynamodb</li>
<li>GCP</li>
</ul>
<h4 id="서버를-오래-켜놓았을-때-생기는-문제점" style="position:relative;"><a href="#%EC%84%9C%EB%B2%84%EB%A5%BC-%EC%98%A4%EB%9E%98-%EC%BC%9C%EB%86%93%EC%95%98%EC%9D%84-%EB%95%8C-%EC%83%9D%EA%B8%B0%EB%8A%94-%EB%AC%B8%EC%A0%9C%EC%A0%90" aria-label="서버를 오래 켜놓았을 때 생기는 문제점 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>서버를 오래 켜놓았을 때 생기는 문제점</h4>
<p>아파치에서 동시작업을 위해
자식 프로세스를 생성하도록 하고, 부모 프로세스와 메모리를 일정 부분 공유하면서
메모리를 절약하는데,
공유되는 메모리의 양이 시간이 지날수록 적어져서 자식 프로세스를 재시작
해줘야한다고 한다</p>
<p>이처럼 시간이 지남에 따라 성능 저하를 일으키는게 있으면 확인해봐야겠다</p>
<p>그야말로 켜놓고만 있었는데 성능이 안좋아지는 원인 중 하나였다</p>
<p>리눅스에서 jiffies 라는 변수가 32비트라 500일 정도 지나면 오버플로우 될 수
있었는데 최신 커널은 64비트로 할당되어 최신 커널을 쓰면 넉넉해진다</p>
<p>쿠버네티스단, 리눅스단, 기타 서비스단에서 체크 필요
주로 데이터가 쌓이거나 메모리 사용량이 쌓일 때 문제가 생긴다</p>
<h4 id="모니터링-범주" style="position:relative;"><a href="#%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EB%B2%94%EC%A3%BC" aria-label="모니터링 범주 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>모니터링 범주</h4>
<p>프로파일링
로깅
트레이싱
메트릭
알림
디버깅
추세 파악(트렌딩)
플러밍</p>
<h4 id="문제-분석과-재발-방지" style="position:relative;"><a href="#%EB%AC%B8%EC%A0%9C-%EB%B6%84%EC%84%9D%EA%B3%BC-%EC%9E%AC%EB%B0%9C-%EB%B0%A9%EC%A7%80" aria-label="문제 분석과 재발 방지 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>문제 분석과 재발 방지</h4>
<p>예측하지 말고 측정한다</p>
<h4 id="대규모-서버에서-겪는-문제" style="position:relative;"><a href="#%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%84%9C%EB%B2%84%EC%97%90%EC%84%9C-%EA%B2%AA%EB%8A%94-%EB%AC%B8%EC%A0%9C" aria-label="대규모 서버에서 겪는 문제 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>대규모 서버에서 겪는 문제</h4>
<p>데이터
CPU
네트워크</p>
<p>데이터의 동기화
cpu 병목
네트워크 병목</p>
<p>load average를 확인하고
sar을 통해 cpu 문제인지 io문제인지 확인한다</p>
<h4 id="대용량-트래픽" style="position:relative;"><a href="#%EB%8C%80%EC%9A%A9%EB%9F%89-%ED%8A%B8%EB%9E%98%ED%94%BD" aria-label="대용량 트래픽 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>대용량 트래픽</h4>
<p>WAS에서 문제가 생길 때 다중화로 해결이 힘든 이유</p>
<ul>
<li>다른 WAS를 찾아야 한다.</li>
<li>로그인 정보를 전달해줘야 한다. (세션 클러스터링 필요)
<ul>
<li>그에 따른 관리 지점 증가</li>
</ul>
</li>
</ul>
<p>데이터베이스 다중화 힘든 이유</p>
<ul>
<li>동기화</li>
</ul>
<h4 id="의사-결정-트리로-시스템-모니터링-하면-되려나" style="position:relative;"><a href="#%EC%9D%98%EC%82%AC-%EA%B2%B0%EC%A0%95-%ED%8A%B8%EB%A6%AC%EB%A1%9C-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%ED%95%98%EB%A9%B4-%EB%90%98%EB%A0%A4%EB%82%98" aria-label="의사 결정 트리로 시스템 모니터링 하면 되려나 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>의사 결정 트리로 시스템 모니터링 하면 되려나</h4>
<p>load average yes</p>
<ul>
<li>cpu bound</li>
<li>io bound</li>
</ul>
<p>load average no</p>
<ul>
<li>network
근데 이러면 dfs로 전체탐색을 해야하겠네</li>
</ul>
<h4 id="observability를-높이기-위해서는-어떻게-해야할까" style="position:relative;"><a href="#observability%EB%A5%BC-%EB%86%92%EC%9D%B4%EA%B8%B0-%EC%9C%84%ED%95%B4%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EC%95%BC%ED%95%A0%EA%B9%8C" aria-label="observability를 높이기 위해서는 어떻게 해야할까 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Observability를 높이기 위해서는 어떻게 해야할까</h4>
<p>이 문제가 발생했는지를 내가 설정하지 않아도 알 수 있으려면 바로 observability가 필요하다</p>
<ul>
<li>피드백을 받기 위해</li>
<li>문제가 일어나기 전에 예측하기 위해?</li>
<li>분산 환경에서 모니터링이 한눈에 되어야 한다</li>
<li>Metrics, Events, Logs, Traces 를 한눈에 확인한다</li>
<li>예측하지 못한 문제를 찾으려고 한다</li>
<li><a href="https://ko.wikipedia.org/wiki/%EC%A0%9C%EC%96%B4%EC%9D%B4%EB%A1%A0">제어이론</a>에서
**관측 가능성(observability)**이란, 시스템의 **출력 변수(output variable)**를
사용하여 **상태 변수(state variable)**에 대한 정보를 알아낼 수 있는지를
나타내는 용어이다. 시스템의 출력 변수를 사용하여 특정 상태 변수에 대한 정보를
알아낼 수 있을 때 그 상태 변수는 **관측 가능하다(observable)**고 하며,
시스템의 모든 상태 변수가 관측 가능할 때 그 시스템은 관측 가능하다고 한다.</li>
<li>메트릭이란? 최적의 네트워크 경로 또는 측정 가능한 단위(평가지표)</li>
</ul>
<p>서버를 가상화해서 사용 시 서버는 추상화가 되고 서버의 상태를 일일이 확인할 필요가 없다. 문제가 생기면 없애고 새로 만들면 되기 때문에.</p>
<p>근데 문제가 생겼는지 확인하려면 기준점이 있어야 하고, 기준이 설정되어 있지 않다면 문제가 발생했는지 알 수 없다</p>
<p>정상 상태를 정의하고, 비정상 상태로 만든 후 정상 상태로 돌리는 것을 통해
Observability를 높인다. 이것을 카오스 엔지니어링이라고 한다.</p>
<p>예측하는 것이 아니라 관찰할 수 있도록 만든 후 관찰 하는 것.</p>
<ul>
<li>Observability</li>
<li>post mortem</li>
<li>무엇을 보여줄 수 있는가</li>
<li>무엇을 해결해야 하는가</li>
<li>어떤 문제가 생길 것 같은가</li>
</ul>
<p>서비스 장애 시간
지표
SLO</p>
<p>SLO는 목표고 SLI는 지표다
지표가 있어야 그걸 기반으로 목표를 세운다</p>
<p>부팅시간 10초 이내는 합리적인 지표일까?
시스템이 고장났을 때 빨리 재시작 되는게 중요할 것 같은데 어차피 헬스체크 간격이 15초라면 부팅시간이 의미가 있을까. 헬스체크 간격을 그렇다고 너무 빠르게 할 필요 있을까?</p>
<p>Log Trace Metric
프로메테우스는 메트릭 전문
로키는 로그 전문
Tempo라는 트레이싱 전문도 생겼구나
트레이스는 네트웍 영역이고 다른 툴이 필요
SigNoz라는 오픈소스 툴이 있다
OpenTelemetry와 연계가 잘 되는 듯</p>
<h4 id="reference" style="position:relative;"><a href="#reference" aria-label="reference permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>reference</h4>
<ul>
<li><a href="https://andromedarabbit.net/%EB%AC%B4%EC%97%87%EC%9D%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80/">https://andromedarabbit.net/무엇을-모니터링할-것인가/</a>
<ul>
<li>AWS, Kubernetes 등에서의 모니터링 파라미터</li>
</ul>
</li>
<li><a href="https://www.mimul.com/blog/linux-server-operations/">https://www.mimul.com/blog/linux-server-operations/</a>
<ul>
<li>리눅스 시스템 상태 확인 스크립트</li>
</ul>
</li>
<li><a href="https://brunch.co.kr/@leedongins/75">CPU 지표</a></li>
<li><a href="https://luavis.me/server/linux-performance-analysis">리눅스 60초 안에 상황 파악하기</a></li>
</ul>
<hr>
<h2 id="benchmark" style="position:relative;"><a href="#benchmark" aria-label="benchmark permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Benchmark</h2>
<h4 id="서버-성능별-벤치마크" style="position:relative;"><a href="#%EC%84%9C%EB%B2%84-%EC%84%B1%EB%8A%A5%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC" aria-label="서버 성능별 벤치마크 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>서버 성능별 벤치마크</h4>
<p><a href="https://woowabros.github.io/experience/2018/04/17/linux-maxuserprocess-openfiles.html">자바로 aws ec2에서 open files 테스트 하는 블로그</a>를 봤고 거기서는 최소사양으로는 1000커넥션 정도밖에 서버가 받아들이지 못했다
이에 더해 1만 커넥션은 컴퓨터 성능이 어느정도 필요하고 10만은 얼마나 필요한지 확인해보자</p>
<p>minikube로 로드밸런싱 켜서 서버 cpu500/ram100으로 설정 시 ha 동작 확인</p>
<ul>
<li>일단 도커에서 cpu 0.5 ram 500m 으로 줄이면 1만 접속 전에 뻗는다</li>
<li>api 서버가 뻗어버린다...</li>
</ul>
<p>라즈베리파이 동접 1000에서 에러 33%, 평균 응답 시간 30ms 정도 나왔다고 한다</p>
<ul>
<li><a href="http://egloos.zum.com/javalove/v/869037">http://egloos.zum.com/javalove/v/869037</a></li>
</ul>
<p>rmtp 서버 스트레스 테스트</p>
<ul>
<li><a href="https://idchowto.com/?p=46410">https://idchowto.com/?p=46410</a></li>
<li>2 core, 4GB memory로 2000 접속 정도</li>
</ul>
<p>aws benchmark</p>
<ul>
<li><a href="https://detechter.com/nginx-vs-apache-on-ec2-performance-comparison/">https://detechter.com/nginx-vs-apache-on-ec2-performance-comparison/</a></li>
</ul>
<p>(책) aws 부하테스트 입문
c4.large 200클라이언트 평균 응답시간 0.026, 처리량 7000</p>
<ul>
<li><a href="https://dev.classmethod.jp/cloud/apache-jmeter-master-slave-100mil-req-min">https://dev.classmethod.jp/cloud/apache-jmeter-master-slave-100mil-req-min</a></li>
</ul>
<hr>
<h2 id="tool" style="position:relative;"><a href="#tool" aria-label="tool permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tool</h2>
<h2 id="prometheus" style="position:relative;"><a href="#prometheus" aria-label="prometheus permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>prometheus</h2>
<ul>
<li>node-exporter
<ul>
<li>collect system metrics</li>
</ul>
</li>
<li>alert-manager</li>
</ul>
<h4 id="elk-vs-tick" style="position:relative;"><a href="#elk-vs-tick" aria-label="elk vs tick permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ELK vs TICK</h4>
<ul>
<li>ELK -- log metrics</li>
<li>TICK -- system metrics</li>
<li>what is prometheus, loki,</li>
</ul>
<h4 id="grafana-alert" style="position:relative;"><a href="#grafana-alert" aria-label="grafana alert permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>grafana alert</h4>
<p>monitoring 서버도 테스트 서버용과 프로덕션 서버용을 따로 두나?</p>
<p>alert를 만드려면 graph여야하고, $variable 로 되있는 템플릿을 쓸 수 없다.
alert를 만들고 싶은 graph를 복사해서 variable을 고치고 사용하면 된다.</p>
<p>sensu는 어떤 기능들을 제공해주고 있지?</p>
<p>grafana daily report</p>
<ul>
<li>enterprise 기능이었다. 오픈소스로 구현된 것도 있을 것이다</li>
</ul>
<h2 id="tick" style="position:relative;"><a href="#tick" aria-label="tick permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TICK</h2>
<ul>
<li>too heavy</li>
<li>I want to find lightweight visualistic monitoring service</li>
<li>go to prometheus</li>
</ul>
<h2 id="benchmark-1" style="position:relative;"><a href="#benchmark-1" aria-label="benchmark 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Benchmark</h2>
<ol>
<li>구글개발자도구 audits</li>
</ol>
<p><a href="/architecture/">Architecture</a></p></section><hr/></article><nav><div style="max-width:90%"><span><a href="/changelog/">/changelog/</a>,</span><span><a href="/portfolio/">/portfolio/</a>,</span><span><a href="/blogging/">/blogging/</a>,</span><span><a href="/document/">/document/</a>,</span><span><a href="/feedback/">/feedback/</a>,</span><span><a href="/foreign_language/">/foreign_language/</a>,</span><span><a href="/logical_thinking/">/logical_thinking/</a>,</span><span><a href="/open_source/">/open_source/</a>,</span><span><a href="/talk/">/talk/</a>,</span><span><a href="/teamwork/">/teamwork/</a>,</span><span><a href="/ai/">/ai/</a>,</span><span><a href="/container/">/container/</a>,</span><span><a href="/data/">/data/</a>,</span><span><a href="/devops/">/devops/</a>,</span><span><a href="/infra/">/infra/</a>,</span><span><a aria-current="page" class="" href="/monitoring/">/monitoring/</a>,</span><span><a href="/product/">/product/</a>,</span><span><a href="/web/">/web/</a>,</span><span><a href="/architecture/">/architecture/</a>,</span><span><a href="/coding/">/coding/</a>,</span><span><a href="/computer_architecture/">/computer_architecture/</a>,</span><span><a href="/data_structure/">/data_structure/</a>,</span><span><a href="/math/">/math/</a>,</span><span><a href="/network/">/network/</a>,</span><span><a href="/software/">/software/</a>,</span><span><a href="/tool/">/tool/</a>,</span><span><a href="/curiosity/">/curiosity/</a>,</span><span><a href="/decision/">/decision/</a>,</span><span><a href="/food/">/food/</a>,</span><span><a href="/investment/">/investment/</a>,</span><span><a href="/music/">/music/</a>,</span><span><a href="/physical/">/physical/</a>,</span><span><a href="/routine/">/routine/</a>,</span><span><a href="/balance/">/balance/</a>,</span><span><a href="/evolve/">/evolve/</a>,</span><span><a href="/future/">/future/</a>,</span><span><a href="/love/">/love/</a>,</span><span><a href="/readability/">/readability/</a>,</span><span><a href="/reality/">/reality/</a>,</span><span><a href="/standard/">/standard/</a>,</span><span><a href="/article/">/article/</a>,</span><span><a href="/history/">/history/</a>,</span><span><a href="/information/">/information/</a>,</span><span><a href="/journal/">/journal/</a>,</span><span><a href="/movie/">/movie/</a>,</span><span><a href="/reading/">/reading/</a>,</span><span><a href="/travel/">/travel/</a>,</span><span><a href="/business/">/business/</a>,</span><span><a href="/creator/">/creator/</a>,</span><span><a href="/design/">/design/</a>,</span><span><a href="/economics/">/economics/</a>,</span><span><a href="/exploration/">/exploration/</a>,</span><span><a href="/100k_concurrent_server/">/100k_concurrent_server/</a>,</span><span><a href="/decision_monitor_size/">/decision_monitor_size/</a>,</span><span><a href="/deploy_erp_server_story/">/deploy_erp_server_story/</a>,</span><span><a href="/digital_content/">/digital_content/</a>,</span><span><a href="/eks_with_terraform/">/eks_with_terraform/</a>,</span><span><a href="/life_tracking/">/life_tracking/</a>,</span><span><a href="/my_space/">/my_space/</a>,</span><span><a href="/note_management/">/note_management/</a>,</span><span><a href="/picasso/">/picasso/</a>,</span><span><a href="/about_architecture/">/about_architecture/</a>,</span><span><a href="/about_development/">/about_development/</a>,</span><span><a href="/collection/">/collection/</a>,</span><span><a href="/developer/">/developer/</a>,</span><span><a href="/fail_experience/">/fail_experience/</a>,</span><span><a href="/my_space/">/my_space/</a>,</span><span><a href="/troubleshooting/">/troubleshooting/</a>,</span><span><a href="/일/">/일/</a>,</span></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/curiosity/">← </a></li><li><a rel="next" href="/changelog/"> →</a></li></ul></nav><div></div></main><footer><small>© 2020, Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a>, Inspired by<!-- --> <a href="https://johngrib.github.io/">john grib</a> and<!-- --> <a href="https://devroom.io">Ariejan de Vroom</a></small></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/monitoring/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-3e75b1a1624b064fdb92.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-995dc061fefb8a2b6378.js\"],\"component---src-pages-about-js\":[\"/component---src-pages-about-js-2b56c919f1406d5412e6.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-87b4768eaf25f0e5a3f3.js\"],\"component---src-pages-tags-js\":[\"/component---src-pages-tags-js-e341062119bd0ed513dc.js\"],\"component---src-pages-wiki-js\":[\"/component---src-pages-wiki-js-978ffc6b31ea14d00f78.js\"],\"component---src-templates-blog-post-js\":[\"/component---src-templates-blog-post-js-e89c9f34309aaedd1bc9.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="27b40e59959a2c823eb9";</script><script src="/webpack-runtime-a81a99791596fd69f3a2.js" async></script><script src="/framework-f70f545f8287a5fac375.js" async></script><script src="/app-3e75b1a1624b064fdb92.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>